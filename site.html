<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portable Buildings - Current Inventory</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="stylesheet" href="color-schemes.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Hide content until site configuration loads */
        body.loading {
            opacity: 0;
        }

        body.loaded {
            opacity: 1;
            transition: opacity 0.2s ease-in;
        }
    </style>
</head>
<body class="loading">
    <header>
        <div class="container header-content">
            <div class="header-left">
                <h1 id="business-name-header">[Your Business Name]</h1>
                <p class="phone-text">Call us at <a href="tel:5551234567" id="header-phone-link" class="phone-link">(555) 123-4567</a></p>
                <p class="hours-text" id="header-hours-text" style="display: none;">
                    <!-- Will be populated by JavaScript with "Open Today from XX:XX til XX:XX" -->
                </p>
            </div>
            <div class="header-right">
                <img src="public/graceland_logo.png" alt="Graceland Portable Buildings" class="header-logo">
                <p class="dealer-text">Authorized Dealer</p>
            </div>
        </div>
    </header>

    <!-- Hero Section with Photo Gallery -->
    <section class="hero">
        <div class="hero-gallery">
            <div class="gallery-slide active">
                <img src="Cabin-12x24-Angle.jpg" alt="Cabin">
            </div>
            <div class="gallery-slide">
                <img src="BARN-ANGLED-8x12.jpg" alt="Barn">
            </div>
            <div class="gallery-slide">
                <img src="Corner-Porch-Cabin.png" alt="Corner Porch Cabin">
            </div>
            <div class="gallery-slide">
                <img src="GHP-6307.jpg" alt="Portable Building">
            </div>
            <div class="gallery-slide">
                <img src="Side-Lofted-Barn-10X16-Front-Angled.png" alt="Side Lofted Barn">
            </div>
            <div class="gallery-slide">
                <img src="Mini-Closed.png" alt="Mini Shed">
            </div>
        </div>
        <button class="gallery-prev" onclick="changeSlide(-1)">‚ùÆ</button>
        <button class="gallery-next" onclick="changeSlide(1)">‚ùØ</button>
        <div class="gallery-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
            <span class="dot" onclick="currentSlide(5)"></span>
        </div>
    </section>

    <!-- Welcome Message -->
    <section class="welcome-section">
        <div class="container">
            <div class="welcome-message">
                <h2>Welcome to Our Portable Buildings Showroom</h2>
                <p>Browse our current inventory and find the perfect portable building for your needs!</p>
                <a href="#inventory" class="live-inventory-btn">
                    <span class="live-indicator"></span>
                    View Our Live Inventory
                </a>
            </div>
        </div>
    </section>

    <!-- Graceland Features Section -->
    <section class="graceland-features">
        <div class="container">
            <h2 class="section-title">Why Choose Graceland Portable Buildings?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-number"></div>
                    <h3>Unsurpassed Quality</h3>
                    <p>Built to last for generations, not years. Our master-builders create durable structures designed to stand the test of time.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number"></div>
                    <h3>Innovative Design</h3>
                    <p>Featuring our patented soffit ventilation system that allows buildings to breathe, providing unique features not available from other manufacturers.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number"></div>
                    <h3>Limitless Customization</h3>
                    <p>Choose from a huge selection of building styles with limitless color combinations. Each building is custom-built to your exact specifications.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number"></div>
                    <h3>7-Year Warranty</h3>
                    <p>Backed by comprehensive support and a 7-year warranty, ensuring your investment is protected for years to come.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Graceland Section -->
    <section class="about-graceland">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>Your Local Graceland Dealer</h2>
                    <p>Community Portable Buildings is proud to be an authorized dealer of Graceland Portable Buildings, a company that has been a leader in manufacturing portable buildings since 2005. Founded by Daniel and Valorie Burnett in Bardwell, Kentucky, Graceland has built its reputation on quality craftsmanship and innovative design.</p>
                    <p>As your local dealer, we offer Graceland's extensive lineup of barns, sheds, garages, cabins, and tiny homes - all built with the same commitment to excellence and designed to meet your specific needs. We're here to help you find the perfect building and provide local support.</p>
                    <p class="tagline">"Make Room for Life‚Ñ¢"</p>
                </div>
                <div class="about-stats">
                    <div class="stat-box">
                        <div class="stat-number">20+</div>
                        <div class="stat-label">Years in Business</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">7</div>
                        <div class="stat-label">Year Warranty</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <main class="container" id="inventory">
        <section class="filters">
            <h2>Find Your Building</h2>
            <div class="filter-group">
                <label for="type-filter">Building Type:</label>
                <select id="type-filter">
                    <option value="all">All Types</option>
                    <option value="MS">Mini Shed</option>
                    <option value="LB">Lofted Barn</option>
                    <option value="UB">Utility Barn</option>
                    <option value="CB">Cabin</option>
                    <option value="GR">Garage</option>
                </select>

                <label for="size-filter">Size:</label>
                <select id="size-filter">
                    <option value="all">All Sizes</option>
                </select>

                <label for="location-filter">Location:</label>
                <select id="location-filter">
                    <option value="all">All Locations</option>
                </select>

                <label for="status-filter">Status:</label>
                <select id="status-filter">
                    <option value="all">All</option>
                    <option value="available">New Inventory</option>
                    <option value="repo">Repo</option>
                </select>
            </div>
        </section>

        <section class="inventory">
            <div class="inventory-count">
                <span id="count">0</span> buildings available
            </div>
            <div id="buildings-grid" class="buildings-grid">
                <!-- Buildings will be populated here by JavaScript -->
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3 id="footer-business-name">[Your Business Name]</h3>
                <p id="footer-address" class="footer-address">[Your Address]</p>
            </div>
            <div class="footer-section">
                <h4>Contact Us</h4>
                <p class="footer-contact">
                    <span>üìû <a href="tel:5551234567" id="footer-phone-link">(555) 123-4567</a></span>
                </p>
                <p class="footer-contact" id="footer-email-container" style="display: none;">
                    <span>‚úâÔ∏è <a href="mailto:" id="footer-email-link"></a></span>
                </p>
            </div>
            <div class="footer-section">
                <h4>Hours</h4>
                <div id="footer-hours" class="footer-hours">
                    <!-- Business hours will be populated by JavaScript -->
                </div>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <div class="social-links" id="social-links">
                    <!-- Social links will be populated by JavaScript -->
                </div>
                <p class="footer-copyright" style="margin-top: 1.5rem;">&copy; 2025 <span id="footer-copyright-name">[Your Business Name]</span>. All rights reserved.</p>
                <p class="footer-dealer">Authorized Graceland Portable Buildings Dealer</p>
            </div>
        </div>
    </footer>

    <!-- Lead Inquiry Modal -->
    <div class="modal" id="inquiry-modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 id="inquiry-modal-title">Inquire About This Building</h2>
                <button class="modal-close" onclick="closeInquiryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: #666; margin-bottom: 1.5rem;">Fill out the form below and we'll be in touch soon!</p>

                <form id="inquiry-form" onsubmit="submitInquiry(event)">
                    <input type="hidden" id="inquiry-building-serial" name="buildingSerial">

                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="inquiry-name" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Your Name *</label>
                        <input type="text" id="inquiry-name" name="customerName" class="form-control" placeholder="John Smith" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;">
                    </div>

                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="inquiry-phone" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Phone Number *</label>
                        <input type="tel" id="inquiry-phone" name="customerPhone" class="form-control" placeholder="318-555-1234" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;">
                    </div>

                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="inquiry-email" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Email</label>
                        <input type="email" id="inquiry-email" name="customerEmail" class="form-control" placeholder="john@example.com" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;">
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="inquiry-notes" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Message (optional)</label>
                        <textarea id="inquiry-notes" name="notes" class="form-control" rows="3" placeholder="Let us know if you have any questions..." style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem; resize: vertical;"></textarea>
                    </div>

                    <button type="submit" class="btn-primary" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; border: none; border-radius: 4px; font-size: 1rem; font-weight: 600; cursor: pointer;">
                        Send Inquiry
                    </button>
                </form>

                <div id="inquiry-success" style="display: none; text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
                    <h3 style="margin-bottom: 0.5rem;">Thank You!</h3>
                    <p style="color: #666;">We received your inquiry and will be in touch soon.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="decoder.js"></script>
    <script src="site-loader.js"></script>
    <!-- inventory.js removed - site-loader.js now loads user-specific inventory from API -->
    <script src="app.js"></script>
    <script>
    // Lead Inquiry Functions
    let currentInquiryBuilding = null;

    function openInquiryModal(serialNumber) {
        const building = window.PROCESSED_INVENTORY.find(b => b.serialNumber === serialNumber);
        if (!building) return;

        currentInquiryBuilding = building;
        document.getElementById('inquiry-building-serial').value = serialNumber;
        document.getElementById('inquiry-modal-title').textContent = `Inquire About: ${building.title}`;

        // Reset form
        document.getElementById('inquiry-form').reset();
        document.getElementById('inquiry-form').style.display = 'block';
        document.getElementById('inquiry-success').style.display = 'none';

        // Show modal
        document.getElementById('inquiry-modal').style.display = 'flex';
    }

    function closeInquiryModal() {
        document.getElementById('inquiry-modal').style.display = 'none';
        currentInquiryBuilding = null;
    }

    async function submitInquiry(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const data = {
            customerName: formData.get('customerName'),
            customerPhone: formData.get('customerPhone'),
            customerEmail: formData.get('customerEmail'),
            buildingSerial: formData.get('buildingSerial'),
            notes: formData.get('notes'),
            subdomain: window.SITE_CONFIG ? window.SITE_CONFIG.subdomain : null
        };

        try {
            const response = await fetch('/api/public/submit-lead', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();

            if (result.success) {
                // Show success message
                document.getElementById('inquiry-form').style.display = 'none';
                document.getElementById('inquiry-success').style.display = 'block';

                // Close modal after 3 seconds
                setTimeout(() => {
                    closeInquiryModal();
                }, 3000);
            } else {
                alert('Sorry, there was an error submitting your inquiry. Please call us directly.');
            }
        } catch (error) {
            console.error('Error submitting inquiry:', error);
            alert('Sorry, there was an error submitting your inquiry. Please call us directly.');
        }
    }

    // Close modal when clicking outside
    document.addEventListener('click', (e) => {
        const modal = document.getElementById('inquiry-modal');
        if (modal && e.target === modal) {
            closeInquiryModal();
        }
    });
    </script>
</body>
</html>
