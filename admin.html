<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Community Portable Buildings</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <script>
        // Check authentication before loading page
        const token = localStorage.getItem('auth_token');
        if (!token) {
            window.location.href = 'login.html';
        }
    </script>

    <header class="admin-header">
        <div class="container">
            <h1>Admin Panel</h1>
            <div class="header-actions">
                <span id="user-email" style="margin-right: 1rem; color: #666;"></span>
                <a href="super-admin.html" class="btn btn-secondary" id="super-admin-link" style="display: none; margin-right: 0.5rem;">Super Admin</a>
                <a href="#" id="view-site-link" target="_blank" class="btn btn-secondary" onclick="viewSiteFromHeader(event)">View Site</a>
                <button class="btn btn-secondary" onclick="logout()" style="margin-left: 0.5rem;">Logout</button>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="customization">Site Customization</button>
            <button class="tab-btn" data-tab="domain">Domain & Website</button>
            <button class="tab-btn" data-tab="payments">Payment Settings</button>
            <button class="tab-btn" data-tab="settings">Display Settings</button>
            <button class="tab-btn" data-tab="lots">Other Lots</button>
            <button class="tab-btn" data-tab="buildings">Manage Buildings</button>
        </div>

        <!-- Site Customization Tab -->
        <div class="tab-content active" id="customization-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Site Customization</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Personalize your website's appearance, content, and branding. Update your business information, choose color schemes, set operating hours, configure inventory sync, and manage hero images. Changes save to your live site immediately after clicking "Save All Customization" at the bottom of this page.</p>
            </div>

            <div class="card">
                <h2>Business Information</h2>

                <div class="form-group">
                    <label for="businessName">Business Name</label>
                    <input type="text" id="businessName" class="form-control"
                           placeholder="e.g., Community Portable Buildings">
                    <p class="help-text">This appears in the header of your website</p>
                </div>

                <div class="form-group">
                    <label for="businessPhone">Phone Number</label>
                    <input type="tel" id="businessPhone" class="form-control"
                           placeholder="e.g., 318-594-5909">
                    <p class="help-text">Main contact phone number for your business</p>
                </div>

                <div class="form-group">
                    <label for="businessEmail">Email Address</label>
                    <input type="email" id="businessEmail" class="form-control"
                           placeholder="e.g., info@yourcompany.com">
                    <p class="help-text">Business email for customer inquiries</p>
                </div>

                <div class="form-group">
                    <label for="businessAddress">Physical Address</label>
                    <textarea id="businessAddress" class="form-control" rows="2"
                              placeholder="e.g., 123 Main St, West Monroe, LA 71291"></textarea>
                    <p class="help-text">Your business location (optional)</p>
                </div>

                <div class="form-group">
                    <label for="facebookUrl">Facebook Page URL</label>
                    <input type="url" id="facebookUrl" class="form-control"
                           placeholder="e.g., https://facebook.com/yourpage">
                    <p class="help-text">Link to your business Facebook page</p>
                </div>

                <div class="form-group">
                    <label for="instagramUrl">Instagram Profile URL</label>
                    <input type="url" id="instagramUrl" class="form-control"
                           placeholder="e.g., https://instagram.com/yourprofile">
                    <p class="help-text">Link to your business Instagram profile</p>
                </div>

                <div class="form-group">
                    <label for="twitterUrl">Twitter/X Profile URL</label>
                    <input type="url" id="twitterUrl" class="form-control"
                           placeholder="e.g., https://twitter.com/yourprofile">
                    <p class="help-text">Link to your business Twitter/X profile (optional)</p>
                </div>
            </div>

            <div class="card">
                <h2>Inventory Sync Settings</h2>
                <p class="help-text">Configure your GPB Sales credentials to automatically sync your inventory. Your credentials are encrypted and stored securely.</p>

                <div class="form-group">
                    <label for="gpbUsername">GPB Sales Username/Email</label>
                    <input type="email" id="gpbUsername" class="form-control"
                           placeholder="Enter your GPB Sales email">
                    <p class="help-text">Your login email for GPB Sales portal</p>
                </div>

                <div class="form-group">
                    <label for="gpbPassword">GPB Sales Password</label>
                    <input type="password" id="gpbPassword" class="form-control"
                           placeholder="Enter your GPB Sales password">
                    <p class="help-text">Your password will be encrypted before storage</p>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoSyncEnabled">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Enable Automatic Daily Sync at 2 AM</span>
                    </label>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-primary" onclick="saveGpbCredentials()">
                        Save Credentials
                    </button>
                    <button class="btn btn-secondary" onclick="triggerUserSync()" id="user-sync-btn">
                        üîÑ Sync Now
                    </button>
                </div>
                <p id="gpb-status" class="help-text" style="margin-top: 1rem; font-weight: 600;"></p>
            </div>

            <div class="card">
                <h2>Location Hours</h2>
                <p class="help-text">Set your business hours to display on your website footer</p>

                <div class="hours-grid" style="display: grid; gap: 1rem;">
                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-monday-enabled" onchange="toggleDayHours('monday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Monday</strong>
                        </label>
                        <div id="hours-monday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-monday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-monday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-tuesday-enabled" onchange="toggleDayHours('tuesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Tuesday</strong>
                        </label>
                        <div id="hours-tuesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-tuesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-tuesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-wednesday-enabled" onchange="toggleDayHours('wednesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Wednesday</strong>
                        </label>
                        <div id="hours-wednesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-wednesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-wednesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-thursday-enabled" onchange="toggleDayHours('thursday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Thursday</strong>
                        </label>
                        <div id="hours-thursday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-thursday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-thursday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-friday-enabled" onchange="toggleDayHours('friday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Friday</strong>
                        </label>
                        <div id="hours-friday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-friday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-friday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-saturday-enabled" onchange="toggleDayHours('saturday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Saturday</strong>
                        </label>
                        <div id="hours-saturday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-saturday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-saturday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-sunday-enabled" onchange="toggleDayHours('sunday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Sunday</strong>
                        </label>
                        <div id="hours-sunday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-sunday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-sunday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>
                </div>

                <p class="help-text" style="margin-top: 1rem;">Check the days you're open and set the hours. Leave unchecked for closed days.</p>
            </div>

            <div class="card">
                <h2>Facebook Auto-Posting</h2>
                <p class="help-text">Automatically post new building listings to your Facebook page
                    <a href="facebook-setup.html" target="_blank" style="margin-left: 0.5rem; color: #2196f3; text-decoration: none; font-weight: 600;">üìñ Setup Instructions ‚Üí</a>
                </p>

                <div class="info-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">‚ö†Ô∏è Auto-Posting Requirements</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">Buildings will <strong>only</strong> auto-post to Facebook if they have:</p>
                    <ul style="margin: 0.5rem 0 0 1.5rem; color: #856404; font-size: 0.9rem;">
                        <li>At least one uploaded image</li>
                        <li>Valid pricing information</li>
                        <li>Complete building description (from serial number decoder)</li>
                    </ul>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="enableAutoPost">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Enable Auto-Posting to Facebook</span>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 1.5rem;">
                    <label for="facebookPageId">Facebook Page ID
                        <a href="facebook-setup.html#step-5-find-your-facebook-page-id" target="_blank" style="margin-left: 0.5rem; font-size: 0.875rem; color: #2196f3; text-decoration: none;">How to find?</a>
                    </label>
                    <input type="text" id="facebookPageId" class="form-control"
                           placeholder="e.g., 123456789012345">
                    <p class="help-text">Your Facebook Page ID (found in page settings)</p>
                </div>

                <div class="form-group">
                    <label for="facebookAccessToken">Facebook Page Access Token
                        <a href="facebook-setup.html#step-4-get-your-page-access-token" target="_blank" style="margin-left: 0.5rem; font-size: 0.875rem; color: #2196f3; text-decoration: none;">How to get?</a>
                    </label>
                    <input type="password" id="facebookAccessToken" class="form-control"
                           placeholder="Enter your Facebook Page Access Token">
                    <p class="help-text">Long-lived page access token from Facebook Developer Console</p>
                </div>

                <div class="form-group">
                    <label>Auto-Post Conditions</label>
                    <div style="margin-top: 0.5rem; display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostNewOnly" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text">Only post new inventory (not repos)</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostWithImages" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text">Only post buildings with uploaded images</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="display: inline-flex;">
                            <input type="checkbox" id="autoPostAvailableOnly" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text">Only post available buildings (not sold/pending)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="autoPostTemplate">Post Template</label>
                    <textarea id="autoPostTemplate" class="form-control" rows="6"
                              placeholder="Use {{name}}, {{size}}, {{price}}, {{type}} as placeholders">üè† New Arrival! {{name}}

üìê Size: {{size}}
üí∞ Cash Price: {{price}}
üìç Location: {{location}}

Call us at {{phone}} or visit our website to learn more!

#PortableBuildings #{{type}} #ForSale</textarea>
                    <p class="help-text">Customize the post message. Available placeholders: {{name}}, {{size}}, {{price}}, {{type}}, {{location}}, {{phone}}, {{rto36}}, {{rto48}}, {{rto60}}, {{rto72}}, {{rtoAll}}</p>
                </div>

                <div class="form-group" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border: 2px solid #e9ecef;">
                    <h3 style="margin-top: 0; color: #1a5490; font-size: 1.1rem;">üß™ Test Facebook Posting</h3>
                    <p class="help-text" style="margin-bottom: 1rem;">Send a test post to your Facebook page using a sample building from your inventory.</p>
                    <button class="btn btn-warning" onclick="testFacebookPost()" id="test-fb-btn">
                        üì§ Send Test Post to Facebook
                    </button>
                    <p id="test-fb-status" class="help-text" style="margin-top: 0.75rem; margin-bottom: 0; font-weight: 600;"></p>
                </div>
            </div>

            <div class="card">
                <h2>Color Scheme</h2>
                <p class="help-text">Choose a professional 2-color gradient scheme</p>

                <div class="color-schemes">
                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="rustic-earth" checked>
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #3D7A40 0%, #2C5F2D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Rustic Earth</h3>
                                <p>Fresh pine to deep forest - natural & professional</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #3D7A40;" title="Fresh Pine"></span>
                                    <span class="color-dot" style="background: #2C5F2D;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="modern-ranch">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #8B3236 0%, #7C2529 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Modern Ranch</h3>
                                <p>Warm barn red to deep burgundy - bold & confident</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #8B3236;" title="Warm Red"></span>
                                    <span class="color-dot" style="background: #7C2529;" title="Barn Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="desert-timber">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #C19A6B 0%, #8B7355 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Desert Timber</h3>
                                <p>Warm sand to rich wood - inviting & warm</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #C19A6B;" title="Desert Sand"></span>
                                    <span class="color-dot" style="background: #8B7355;" title="Rich Wood"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="slate-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #4A5568 0%, #2D3748 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Slate Blue</h3>
                                <p>Cool gray to deep slate - professional & modern</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #4A5568;" title="Slate Gray"></span>
                                    <span class="color-dot" style="background: #2D3748;" title="Deep Slate"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="forest-sage">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6B8E6F 0%, #4A6B4E 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Forest Sage</h3>
                                <p>Soft sage to forest green - calm & natural</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6B8E6F;" title="Sage Green"></span>
                                    <span class="color-dot" style="background: #4A6B4E;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="navy-steel">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #2C5282 0%, #1A365D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Navy Steel</h3>
                                <p>Steel blue to deep navy - trustworthy & strong</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #2C5282;" title="Steel Blue"></span>
                                    <span class="color-dot" style="background: #1A365D;" title="Deep Navy"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="autumn-oak">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #A0522D 0%, #6B4423 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Autumn Oak</h3>
                                <p>Burnt sienna to rich oak - rustic & grounded</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #A0522D;" title="Burnt Sienna"></span>
                                    <span class="color-dot" style="background: #6B4423;" title="Rich Oak"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="pewter-charcoal">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6C757D 0%, #495057 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Pewter Charcoal</h3>
                                <p>Soft pewter to charcoal - elegant & timeless</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6C757D;" title="Pewter"></span>
                                    <span class="color-dot" style="background: #495057;" title="Charcoal"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="classic-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Classic Blue</h3>
                                <p>Professional royal blue - trustworthy & corporate</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #1E40AF;" title="Royal Blue"></span>
                                    <span class="color-dot" style="background: #1E3A8A;" title="Deep Blue"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="crimson-red">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #B91C1C 0%, #7F1D1D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Crimson Red</h3>
                                <p>Bold crimson to dark red - powerful & energetic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #B91C1C;" title="Crimson"></span>
                                    <span class="color-dot" style="background: #7F1D1D;" title="Dark Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="olive-green">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #65A30D 0%, #4D7C0F 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Olive Green</h3>
                                <p>Natural olive to deep green - earthy & organic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #65A30D;" title="Olive"></span>
                                    <span class="color-dot" style="background: #4D7C0F;" title="Deep Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="royal-purple">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Royal Purple</h3>
                                <p>Regal violet to deep purple - luxurious & creative</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #7C3AED;" title="Violet"></span>
                                    <span class="color-dot" style="background: #5B21B6;" title="Royal Purple"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="sunset-orange">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #EA580C 0%, #9A3412 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Sunset Orange</h3>
                                <p>Warm orange to burnt sienna - vibrant & welcoming</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #EA580C;" title="Orange"></span>
                                    <span class="color-dot" style="background: #9A3412;" title="Burnt Orange"></span>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 2rem;">
                    <label for="buttonColor">Custom Button Color (Optional)</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="color" id="buttonColor" class="color-picker" value="#2C5F2D">
                        <input type="text" id="buttonColorHex" class="form-control" placeholder="#2C5F2D" style="max-width: 150px;">
                        <button class="btn btn-secondary btn-sm" onclick="resetButtonColor()">Reset</button>
                    </div>
                    <p class="help-text">Customize the button color on product cards (overrides scheme default)</p>
                </div>
            </div>

            <div class="card">
                <h2>Welcome Message</h2>

                <div class="form-group">
                    <label for="welcomeTitle">Title</label>
                    <input type="text" id="welcomeTitle" class="form-control"
                           value="Welcome to Community Portable Buildings of West Monroe, LA and Columbia, LA">
                </div>

                <div class="form-group">
                    <label for="welcomeMessage">Message</label>
                    <textarea id="welcomeMessage" class="form-control" rows="3">Take a look at what we have in stock, and let us know if we can design you a custom Graceland Building or help in any way!</textarea>
                </div>
            </div>

            <div class="card">
                <h2>Hero Carousel Images</h2>
                <p class="help-text">Current images in the carousel. Drag to reorder, click X to remove.</p>

                <div id="carousel-images" class="carousel-manager">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="form-group">
                    <label for="newCarouselImage">Add New Image (filename from root directory)</label>
                    <div class="input-group">
                        <input type="text" id="newCarouselImage" class="form-control"
                               placeholder="e.g., Cabin-12x24-Angle.jpg">
                        <button class="btn btn-secondary" onclick="addCarouselImage()">Add Image</button>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-lg" onclick="saveCustomization()">üíæ Save All Customization</button>
        </div>

        <!-- Domain & Website Tab -->
        <div class="tab-content" id="domain-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Domain & Website Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Control your website's web address and view statistics. Choose a free shed-sync.com subdomain or connect your own custom domain. View metrics on your total buildings, available inventory, and uploaded photos.</p>
            </div>

            <!-- Dark Theme Domain Management with Yellow Accents -->
            <style>
                .domain-card {
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 12px;
                    padding: 2rem;
                    margin-bottom: 2rem;
                    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                    border: 1px solid #2a2a3e;
                }

                .domain-card h2 {
                    color: #ffd60a;
                    margin-bottom: 0.5rem;
                    font-size: 1.75rem;
                    font-weight: 700;
                }

                .domain-card p {
                    color: #a8a8b8;
                    margin-bottom: 1.5rem;
                }

                .domain-url-display {
                    background: #0f1419;
                    border: 2px solid #ffd60a;
                    border-radius: 8px;
                    padding: 1.25rem;
                    font-family: 'Courier New', monospace;
                    font-size: 1.125rem;
                    color: #ffd60a;
                    text-align: center;
                    font-weight: 600;
                    margin: 1.5rem 0;
                    box-shadow: 0 0 20px rgba(255, 214, 10, 0.15);
                }

                .domain-badge {
                    display: inline-block;
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-size: 0.875rem;
                    font-weight: 700;
                    margin-left: 1rem;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                }

                .domain-action-btn {
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    border: none;
                    padding: 0.875rem 2rem;
                    border-radius: 8px;
                    font-weight: 700;
                    font-size: 1rem;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                    margin-right: 1rem;
                }

                .domain-action-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(255, 214, 10, 0.5);
                }

                .domain-action-btn:active {
                    transform: translateY(0);
                }

                .domain-section {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1.5rem;
                    border-left: 4px solid #ffd60a;
                }

                .domain-section h3 {
                    color: #fff;
                    margin-bottom: 1rem;
                    font-size: 1.25rem;
                }

                .domain-input {
                    background: #0f1419;
                    border: 2px solid #2a2a3e;
                    color: #fff;
                    padding: 0.875rem;
                    border-radius: 8px;
                    font-size: 1rem;
                    width: 100%;
                    transition: border-color 0.3s ease;
                }

                .domain-input:focus {
                    outline: none;
                    border-color: #ffd60a;
                    box-shadow: 0 0 0 3px rgba(255, 214, 10, 0.1);
                }

                .domain-input::placeholder {
                    color: #5a5a6a;
                }

                .dns-instructions {
                    background: #0f1419;
                    border: 1px solid #2a2a3e;
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1rem;
                }

                .dns-instructions h4 {
                    color: #ffd60a;
                    margin-bottom: 1rem;
                    font-size: 1.125rem;
                }

                .dns-record {
                    background: rgba(255, 214, 10, 0.05);
                    border-left: 3px solid #ffd60a;
                    padding: 1rem;
                    margin: 0.75rem 0;
                    border-radius: 4px;
                }

                .dns-record code {
                    color: #ffd60a;
                    font-family: 'Courier New', monospace;
                    background: #1a1a2e;
                    padding: 0.25rem 0.5rem;
                    border-radius: 4px;
                }

                .dns-record strong {
                    color: #fff;
                }

                .verification-status {
                    display: inline-flex;
                    align-items: center;
                    gap: 0.5rem;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-weight: 600;
                    font-size: 0.875rem;
                }

                .verification-status.pending {
                    background: rgba(255, 152, 0, 0.15);
                    color: #ff9800;
                    border: 1px solid #ff9800;
                }

                .verification-status.verified {
                    background: rgba(76, 175, 80, 0.15);
                    color: #4caf50;
                    border: 1px solid #4caf50;
                }

                .verification-status.failed {
                    background: rgba(244, 67, 54, 0.15);
                    color: #f44336;
                    border: 1px solid #f44336;
                }

                .help-note {
                    color: #a8a8b8;
                    font-size: 0.9rem;
                    margin-top: 0.75rem;
                    line-height: 1.6;
                }

                .copy-btn {
                    background: rgba(255, 214, 10, 0.1);
                    border: 1px solid #ffd60a;
                    color: #ffd60a;
                    padding: 0.375rem 0.75rem;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.875rem;
                    font-weight: 600;
                    transition: all 0.2s ease;
                    margin-left: 0.5rem;
                }

                .copy-btn:hover {
                    background: rgba(255, 214, 10, 0.2);
                }
            </style>

            <!-- Subdomain Picker (shown if user doesn't have subdomain) -->
            <div class="domain-card" id="subdomain-picker-card" style="display: none;">
                <h2>üåê Choose Your Website Address</h2>
                <p>Pick a unique subdomain for your website. This will be your permanent web address.</p>

                <div class="domain-section">
                    <div class="form-group">
                        <label style="color: #ffd60a; font-weight: 600; display: block; margin-bottom: 0.75rem;">
                            Your Subdomain
                        </label>
                        <div style="display: flex; gap: 0.75rem; align-items: center;">
                            <input type="text"
                                   id="subdomain-input"
                                   class="domain-input"
                                   placeholder="yourbusiness"
                                   style="flex: 1; text-transform: lowercase;"
                                   oninput="checkSubdomainAvailability()">
                            <span style="color: #a8a8b8; font-weight: 600; white-space: nowrap;">.shed-sync.com</span>
                        </div>
                        <div id="subdomain-validation" style="margin-top: 0.75rem; font-weight: 600; display: none;">
                            <!-- Validation message will appear here -->
                        </div>
                        <p class="help-note">
                            üí° Use 3-30 characters: lowercase letters, numbers, and hyphens. Cannot start or end with a hyphen.<br>
                            <strong style="color: #ffd60a;">Example:</strong> mountain-sheds ‚Üí mountain-sheds.shed-sync.com
                        </p>
                    </div>

                    <button class="domain-action-btn" onclick="saveSubdomain()" id="save-subdomain-btn" disabled style="opacity: 0.5; cursor: not-allowed;">
                        üíæ Claim This Subdomain
                    </button>
                </div>
            </div>

            <!-- Your Subdomain (shown if user has subdomain) -->
            <div class="domain-card" id="subdomain-display-card" style="display: none;">
                <h2>üåê Your Website Address</h2>
                <p>Your website is live at:</p>

                <div class="domain-url-display" id="subdomain-url">
                    Loading...
                </div>

                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="domain-action-btn" onclick="viewLiveSite()">
                        üöÄ View Live Site
                    </button>
                    <button class="domain-action-btn" onclick="copySubdomainUrl()">
                        üìã Copy URL
                    </button>
                </div>
            </div>

            <!-- Custom Domain Section -->
            <div class="domain-card">
                <h2>üéØ Connect Your Own Domain</h2>
                <p>Want to use your own domain name? Connect it here (e.g., buytheshed.com)</p>

                <div class="domain-section">
                    <h3>Custom Domain</h3>

                    <div id="custom-domain-display" style="display: none;">
                        <div class="domain-url-display" style="border-color: #4caf50;">
                            <span id="current-custom-domain"></span>
                            <span class="verification-status verified" id="domain-verification-status">
                                ‚úì Verified
                            </span>
                        </div>
                        <button class="domain-action-btn" onclick="removeCustomDomain()">
                            üóëÔ∏è Remove Custom Domain
                        </button>
                    </div>

                    <div id="custom-domain-form">
                        <div class="form-group">
                            <input type="text"
                                   id="custom-domain-input"
                                   class="domain-input"
                                   placeholder="Enter your domain (e.g., buytheshed.com)"
                                   style="margin-bottom: 1rem;">
                            <p class="help-note">
                                üí° Enter just the domain name without http:// or www. Example: <strong style="color: #ffd60a;">buytheshed.com</strong>
                            </p>
                        </div>

                        <button class="domain-action-btn" onclick="saveCustomDomain()">
                            üíæ Save Custom Domain
                        </button>
                    </div>
                </div>

                <!-- DNS Instructions -->
                <div class="dns-instructions" id="dns-instructions" style="display: none;">
                    <h4>‚öôÔ∏è DNS Configuration Required</h4>
                    <p style="color: #a8a8b8; margin-bottom: 1.5rem;">
                        Follow these steps to connect your custom domain:
                    </p>

                    <div style="background: rgba(255, 214, 10, 0.08); border-left: 3px solid #ffd60a; padding: 1.25rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #ffd60a; display: block; margin-bottom: 1rem;">üìã Step-by-Step Guide for GoDaddy (and most other registrars):</strong>

                        <ol style="color: #a8a8b8; margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong style="color: #fff;">Log in to your GoDaddy account</strong> and go to "My Products"</li>
                            <li><strong style="color: #fff;">Find your domain</strong> (e.g., buytheshed.com) and click "DNS" or "Manage DNS"</li>
                            <li><strong style="color: #fff;">Add a CNAME record</strong> with these exact settings:</li>
                        </ol>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0;">
                        <strong>Type:</strong> <code>CNAME</code><br>
                        <strong>Name:</strong> <code>www</code><br>
                        <strong>Value/Points to:</strong> <code id="dns-subdomain-value">your-subdomain.shed-sync.com</code>
                        <button class="copy-btn" onclick="copyDnsValue()">üìã Copy Value</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.05); border-left: 3px solid #a8a8b8; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #a8a8b8; font-size: 0.9rem;">‚ö†Ô∏è Common Issues:</strong>
                        <ul style="color: #a8a8b8; margin: 0.5rem 0 0 1.5rem; font-size: 0.85rem; line-height: 1.6;">
                            <li>If you see an existing "A" record for "www", <strong>delete it first</strong> before adding the CNAME</li>
                            <li>Make sure you're adding the record for <strong>"www"</strong> not "@" (root)</li>
                            <li>Don't include "http://" or "https://" in the Value field</li>
                        </ul>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); border-left: 3px solid #4caf50; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #4caf50; display: block; margin-bottom: 0.75rem;">‚úì Step 4: Forward Your Root Domain (Recommended)</strong>
                        <p style="color: #a8a8b8; margin: 0; font-size: 0.9rem; line-height: 1.6;">
                            So visitors can reach your site at both <code>buytheshed.com</code> AND <code>www.buytheshed.com</code>:<br><br>
                            ‚Ä¢ In GoDaddy, go to <strong>Domain Settings ‚Üí Forwarding</strong><br>
                            ‚Ä¢ Click "Add Forwarding"<br>
                            ‚Ä¢ Forward <code>buytheshed.com</code> ‚Üí <code>www.buytheshed.com</code><br>
                            ‚Ä¢ Type: <strong>Permanent (301)</strong><br>
                            ‚Ä¢ Forward only: <strong>Yes</strong><br><br>
                            <em style="color: #4caf50;">This ensures both URLs work perfectly!</em>
                        </p>
                    </div>

                    <p class="help-note" style="margin-top: 1rem; font-size: 0.9rem;">
                        ‚è±Ô∏è <strong>Timing:</strong> DNS changes typically take 5-60 minutes to propagate (sometimes up to 24 hours). We'll automatically verify your domain once the DNS is configured correctly.
                    </p>

                    <p class="help-note" style="background: rgba(33, 150, 243, 0.1); padding: 0.75rem; border-radius: 4px; border-left: 3px solid #2196f3;">
                        üí° <strong>Why "www"?</strong> Technical limitation: DNS standards don't allow CNAME records for root domains (like buytheshed.com without www). Using <code>www</code> with domain forwarding is the standard industry solution that all major sites use.
                    </p>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="domain-card">
                <h2>üìä Website Statistics</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                    <div style="background: rgba(255, 214, 10, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffd60a;">
                        <div style="font-size: 2rem; color: #ffd60a; font-weight: 700;" id="building-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Buildings Listed</div>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #4caf50;">
                        <div style="font-size: 2rem; color: #4caf50; font-weight: 700;" id="available-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Available</div>
                    </div>
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <div style="font-size: 2rem; color: #2196f3; font-weight: 700;" id="photo-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Photos Uploaded</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Settings Tab -->
        <div class="tab-content" id="payments-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Subscription & Billing</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your Shed-Sync subscription and billing information. Update your payment method or view billing history.</p>
            </div>

            <div class="card">
                <h2>üí≥ Current Subscription</h2>

                <div id="subscription-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Plan</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-plan">Monthly Subscription</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Amount</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-amount">$99/month</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Status</div>
                            <div style="font-size: 1.25rem; font-weight: 600;" id="subscription-status">
                                <span style="color: #4caf50;">‚óè Active</span>
                            </div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Next Billing Date</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-next-billing">‚Äî</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Payment Method</h3>

                <div id="payment-method-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="font-size: 2rem;">üí≥</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;" id="card-info">No payment method on file</div>
                            <div style="color: #666; font-size: 0.875rem;" id="card-expires">‚Äî</div>
                        </div>
                        <button class="btn btn-secondary" onclick="updatePaymentMethod()">
                            Update Payment Method
                        </button>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Billing History</h3>

                <div id="billing-history" style="margin-bottom: 1.5rem;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e0e0e0; text-align: left;">
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Date</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Description</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Amount</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Status</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Receipt</th>
                            </tr>
                        </thead>
                        <tbody id="billing-history-body">
                            <tr>
                                <td colspan="5" style="padding: 2rem; text-align: center; color: #999;">
                                    Loading billing history...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-top: 2rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">Need help with billing?</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">
                        Contact our support team at <a href="mailto:billing@shed-sync.com" style="color: #856404; text-decoration: underline;">billing@shed-sync.com</a> for assistance with billing questions or to cancel your subscription.
                    </p>
                </div>
            </div>
        </div>

        <!-- Display Settings Tab -->
        <div class="tab-content" id="settings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Account & Display Settings</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your account security and customize what information appears on your website. Change your Shed-Sync login password and toggle visibility of cash prices and rent-to-own options on your public site.</p>
            </div>

            <div class="card">
                <h2>Change Password</h2>
                <p class="help-text">Update your Shed-Sync login password</p>

                <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" class="form-control" placeholder="Enter your current password">
                </div>

                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password (min 8 characters)">
                    <p class="help-text">Must be at least 8 characters long</p>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm new password">
                </div>

                <button class="btn btn-primary" onclick="changePassword()">Change Password</button>
                <p id="password-change-status" class="help-text" style="margin-top: 1rem; font-weight: 600;"></p>
            </div>

            <div class="card">
                <h2>Display Settings</h2>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="showCashPrice" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Show Cash Prices</span>
                    </label>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="showRtoOptions" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Show Rent-to-Own Options</span>
                    </label>
                </div>

                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
        </div>

        <!-- Other Lots Tab -->
        <div class="tab-content" id="lots-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Multi-Location Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Track inventory from multiple lot locations in one place. Add additional GPB Sales credentials for other locations, and buildings will automatically sync daily and display with their lot location tags on your website.</p>
            </div>

            <div class="card">
                <h2>Manage Other Lot Locations</h2>
                <p class="help-text">Track inventory from other lot locations. Buildings will be tagged with their lot location.</p>

                <div id="lots-list" class="lots-list">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Sync Inventory</h3>
                    <p class="help-text">‚úÖ Automatic sync runs daily at 2 AM. Or trigger a manual sync now:</p>
                    <button class="btn btn-primary" onclick="triggerManualSync()" id="manual-sync-btn">
                        üîÑ Run Manual Sync Now
                    </button>
                    <p id="sync-status" class="help-text" style="margin-top: 1rem; color: var(--text-light);"></p>
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Add New Lot Location</h3>

                    <!-- Multi-lot feature disabled message -->
                    <div id="multi-lot-disabled" style="display: none;">
                        <p class="help-text" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                            üìç Want to manage multiple lot locations? Contact DealerSync to find out how to add support for your other locations:<br>
                            <strong style="color: #2196f3; margin-top: 0.5rem; display: inline-block;">support@dealersync.com</strong>
                        </p>
                    </div>

                    <!-- Multi-lot feature enabled form -->
                    <div id="multi-lot-enabled" style="display: none;">
                        <p class="help-text">Enter GPB Sales credentials for another lot location. Buildings will be automatically synced daily and tagged with the lot name.</p>
                        <div class="form-group">
                            <label for="lot-name">Lot Name/Location</label>
                            <input type="text" id="lot-name" class="form-control" placeholder="e.g., Columbia, LA">
                        </div>
                        <div class="form-group">
                            <label for="lot-username">GPB Sales Username/Email</label>
                            <input type="email" id="lot-username" class="form-control" placeholder="Enter GPB Sales email">
                        </div>
                        <div class="form-group">
                            <label for="lot-password">GPB Sales Password</label>
                            <input type="password" id="lot-password" class="form-control" placeholder="Enter GPB Sales password">
                        </div>
                        <button class="btn btn-primary" onclick="addLot()">Add Lot Location</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Buildings Tab -->
        <div class="tab-content" id="buildings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Building Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">View and manage all your building inventory in one place. Upload photos, set custom pricing, mark buildings as sold or pending, decode serial numbers for details, and control which buildings appear on your public website.</p>
            </div>

            <div class="card">
                <h2>Manage Buildings</h2>

                <div class="admin-filters">
                    <div class="admin-filter-group">
                        <input type="text" id="building-search" class="form-control" placeholder="Search by serial number, size, or type...">
                    </div>
                    <div class="admin-filter-group">
                        <select id="building-status-filter" class="form-control">
                            <option value="all">All Buildings</option>
                            <option value="available">Available</option>
                            <option value="pending">Pending</option>
                            <option value="sold">Sold</option>
                            <option value="hidden">Hidden</option>
                        </select>
                        <select id="building-type-filter" class="form-control">
                            <option value="all">All Types</option>
                            <option value="new">New Inventory</option>
                            <option value="repo">Pre-Owned (Repo)</option>
                        </select>
                    </div>
                </div>

                <div class="buildings-list" id="buildings-list">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <div class="toast" id="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal" id="image-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Building Images</h2>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-building-info"></div>

                <div class="image-gallery" id="building-images">
                    <!-- Uploaded images will appear here -->
                </div>

                <div class="upload-section">
                    <label class="upload-btn">
                        <input type="file" id="image-upload" accept="image/*,.heic" multiple style="display: none;">
                        <span>üì∑ Upload Photos (Max 5)</span>
                    </label>
                    <p class="help-text">Supports JPG, PNG, HEIC. HEIC will be auto-converted. Drag images to reorder. Click ‚òÖ to set main image.</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeImageModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="decoder.js"></script>
    <script src="inventory.js"></script>
    <script src="admin.js"></script>
</body>
</html>
