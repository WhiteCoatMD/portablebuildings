<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Community Portable Buildings</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <script>
        // Check authentication before loading page
        const token = localStorage.getItem('auth_token');
        if (!token) {
            window.location.href = 'login.html';
        }
    </script>

    <header class="admin-header">
        <div class="container">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <img src="logo.png" alt="ShedSync Logo" style="height: 50px; width: auto;">
                <h1>Admin Panel</h1>
            </div>
            <div class="header-actions">
                <span id="user-email" style="margin-right: 1rem; color: #e0e0e0;"></span>
                <button class="btn btn-warning" onclick="openFeatureRequest()" style="margin-right: 0.5rem;">üí° Request Feature</button>
                <a href="super-admin.html" class="btn btn-secondary" id="super-admin-link" style="display: none; margin-right: 0.5rem;">Super Admin</a>
                <a href="#" id="view-site-link" target="_blank" class="btn btn-secondary" onclick="viewSiteFromHeader(event)">View Site</a>
                <button class="btn btn-secondary" onclick="logout()" style="margin-left: 0.5rem;">Logout</button>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="marketing">üì± Automated Marketing</button>
            <button class="tab-btn" data-tab="customization">üé® Site Customization</button>
            <button class="tab-btn" data-tab="inventory">Inventory Settings</button>
            <button class="tab-btn" data-tab="domain">Domain & Website</button>
            <button class="tab-btn" data-tab="leads">Leads</button>
            <button class="tab-btn" data-tab="payments">Payment Settings</button>
            <button class="tab-btn" data-tab="settings">Account Settings</button>
            <button class="tab-btn" data-tab="lots">Other Lots</button>
            <button class="tab-btn" data-tab="buildings">Manage Buildings</button>
        </div>

        <!-- Automated Marketing Tab -->
        <div class="tab-content active" id="marketing-tab">
            <style>
                .customization-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1.5rem;
                    margin-bottom: 2rem;
                }

                .customization-grid .card {
                    margin-bottom: 0;
                }

                @media (max-width: 1024px) {
                    .customization-grid {
                        grid-template-columns: 1fr;
                    }
                }
            </style>

            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Automated Marketing</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Automatically post your new inventory to Facebook and Google Business Profile. Set up templates, customize messages, and let Shed-Sync market your buildings for you!</p>
            </div>

            <!-- Platform Selection View -->
            <div id="marketing-platform-selector" style="display: block;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    <!-- Facebook Card -->
                    <div class="card" style="background: #1877f2; color: white; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;" onclick="showMarketingPlatform('facebook')">
                        <div style="text-align: center; padding: 2rem 1rem;">
                            <svg style="width: 80px; height: 80px; margin-bottom: 1rem;" fill="white" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            <h2 style="margin: 0 0 0.5rem 0; color: white;">Facebook Marketing</h2>
                            <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 0.95rem;">Auto-post new inventory to your Facebook page with customizable templates</p>
                            <button class="btn" style="background: white; color: #1877f2; margin-top: 1.5rem; font-weight: 600;">Configure Facebook ‚Üí</button>
                        </div>
                    </div>

                    <!-- Google Business Profile Card -->
                    <div class="card" style="background: linear-gradient(135deg, #4285f4 0%, #34a853 100%); color: white; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;" onclick="showMarketingPlatform('google')">
                        <div style="text-align: center; padding: 2rem 1rem;">
                            <svg style="width: 80px; height: 80px; margin-bottom: 1rem;" fill="white" viewBox="0 0 24 24">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            <h2 style="margin: 0 0 0.5rem 0; color: white;">Google Business Profile</h2>
                            <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 0.95rem;">Post updates that appear in Google Search and Google Maps</p>
                            <button class="btn" style="background: white; color: #4285f4; margin-top: 1.5rem; font-weight: 600;">Configure Google ‚Üí</button>
                        </div>
                    </div>
                </div>

                <div class="card" style="background: #f8f9fa; border: 2px solid #dee2e6;">
                    <h3 style="color: #495057;">Why Automated Marketing?</h3>
                    <ul style="color: #6c757d; line-height: 1.8; margin: 1rem 0 0 0;">
                        <li><strong>Save Time:</strong> Automatically post new inventory without manual work</li>
                        <li><strong>Increase Visibility:</strong> Reach customers on multiple platforms</li>
                        <li><strong>Stay Consistent:</strong> Never forget to promote a new building</li>
                        <li><strong>Customizable:</strong> Use templates with your branding and style</li>
                        <li><strong>Track Results:</strong> See which posts drive the most engagement</li>
                    </ul>
                </div>
            </div>
            <div id="marketing-facebook-section" style="display: none;">
                <div style="margin-bottom: 2rem;">
                    <button class="btn" style="background: #6c757d; color: white;" onclick="backToMarketingSelector()">
                        ‚Üê Back to Platforms
                    </button>
                </div>

                <div style="background: #1877f2; color: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; text-align: center;">
                    <svg style="width: 60px; height: 60px; margin-bottom: 1rem;" fill="white" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    <h1 style="margin: 0 0 0.5rem 0; color: white;">Facebook Marketing</h1>
                    <p style="margin: 0; color: rgba(255,255,255,0.9);">Configure auto-posting and templates for your Facebook page</p>
                </div>

            <!-- Facebook Settings Card -->
            <div class="card" style="background: #1a1a2e; color: #bc9c22; margin-bottom: 2rem;">
                <h2 style="color: #bc9c22;">Facebook Auto-Posting</h2>
                <p class="help-text" style="color: #bc9c22;">Automatically post new building listings to your Facebook page</p>

                <div class="info-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">‚ö†Ô∏è Auto-Posting Requirements</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">Buildings will <strong>only</strong> auto-post to Facebook if they have:</p>
                    <ul style="margin: 0.5rem 0 0 1.5rem; color: #856404; font-size: 0.9rem;">
                        <li>At least one uploaded image</li>
                        <li>Valid pricing information</li>
                        <li>Complete building description (from serial number decoder)</li>
                    </ul>
                </div>

                <!-- Facebook Connection Status -->
                <div id="facebook-connected-2" style="display: none; background: #d4edda; border-left: 4px solid #28a745; padding: 1.25rem; border-radius: 6px; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                        <span style="font-size: 2rem;">‚úÖ</span>
                        <div style="flex: 1;">
                            <strong style="color: #155724; font-size: 1.05rem;">Facebook Page Connected</strong>
                            <p style="margin: 0.25rem 0 0 0; color: #155724; font-size: 0.9rem;">
                                Connected to: <strong id="connected-page-name-2"></strong>
                            </p>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="disconnectFacebook()">Disconnect</button>
                    </div>
                </div>

                <div id="facebook-not-connected-2" style="background: #f8f9fa; border: 2px dashed #dee2e6; padding: 2rem; border-radius: 8px; text-align: center; margin-bottom: 1.5rem;">
                    <h3 style="color: #495057; margin-bottom: 1rem;">Connect Your Facebook Page</h3>
                    <p style="color: #6c757d; margin-bottom: 1.5rem;">Click the button below to securely connect your Facebook page. No manual setup required!</p>
                    <button class="btn btn-primary" onclick="connectFacebookOAuth()" style="background: #1877f2; padding: 0.875rem 2rem; font-size: 1.05rem;">
                        <svg style="width: 20px; height: 20px; margin-right: 0.5rem; vertical-align: middle;" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        Connect with Facebook
                    </button>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="enableAutoPost-2">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text" style="color: #bc9c22;">Enable Auto-Posting to Facebook</span>
                    </label>
                </div>

                <div class="form-group">
                    <label style="color: #bc9c22;">Auto-Post Conditions</label>
                    <div style="margin-top: 0.5rem; display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostNewOnly-2" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post new inventory (not repos)</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostWithImages-2" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post buildings with uploaded images</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="display: inline-flex;">
                            <input type="checkbox" id="autoPostAvailableOnly-2" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post available buildings (not sold/pending)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label style="color: #bc9c22;">üìÖ Posting Schedule</label>
                    <p class="help-text" style="color: #bc9c22; margin-bottom: 1rem;">Control when new buildings are posted to Facebook</p>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.5rem;">Post Frequency</label>
                        <select id="postFrequency" class="form-control" onchange="toggleCustomSchedule()" style="background: #2a2a3e; color: #bc9c22; border: 1px solid #5a5a6a;">
                            <option value="immediate">Post Immediately (as inventory syncs)</option>
                            <option value="daily">Once Daily (optimal time)</option>
                            <option value="3-5week">3-5 Times Per Week</option>
                            <option value="custom">Custom Schedule</option>
                        </select>
                        <p class="help-text" style="color: #bc9c22; margin-top: 0.5rem;">Choose how often new buildings should be posted</p>
                    </div>

                    <!-- Custom Schedule Section (Hidden by default) -->
                    <div id="customScheduleSection" style="display: none; background: rgba(188, 156, 34, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid #bc9c22;">
                        <h4 style="color: #bc9c22; margin-top: 0;">Custom Posting Schedule</h4>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.75rem;">Select Days to Post</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.75rem;">
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedMon" value="monday" class="schedule-day">
                                    <span style="color: #bc9c22;">Monday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedTue" value="tuesday" class="schedule-day">
                                    <span style="color: #bc9c22;">Tuesday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedWed" value="wednesday" class="schedule-day">
                                    <span style="color: #bc9c22;">Wednesday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedThu" value="thursday" class="schedule-day">
                                    <span style="color: #bc9c22;">Thursday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedFri" value="friday" class="schedule-day">
                                    <span style="color: #bc9c22;">Friday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedSat" value="saturday" class="schedule-day">
                                    <span style="color: #bc9c22;">Saturday</span>
                                </label>
                                <label class="day-checkbox" style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="schedSun" value="sunday" class="schedule-day">
                                    <span style="color: #bc9c22;">Sunday</span>
                                </label>
                            </div>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.75rem;">Posting Time Window</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div>
                                    <label style="color: #bc9c22; font-size: 0.9rem; display: block; margin-bottom: 0.5rem;">Start Time</label>
                                    <input type="time" id="schedStartTime" class="form-control" value="09:00" style="background: #2a2a3e; color: #bc9c22; border: 1px solid #5a5a6a;">
                                </div>
                                <div>
                                    <label style="color: #bc9c22; font-size: 0.9rem; display: block; margin-bottom: 0.5rem;">End Time</label>
                                    <input type="time" id="schedEndTime" class="form-control" value="17:00" style="background: #2a2a3e; color: #bc9c22; border: 1px solid #5a5a6a;">
                                </div>
                            </div>
                            <p class="help-text" style="color: #bc9c22; margin-top: 0.5rem;">Posts will be scheduled randomly within this time window on selected days</p>
                        </div>

                        <div>
                            <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.75rem;">Max Posts Per Day</label>
                            <select id="maxPostsPerDay" class="form-control" style="background: #2a2a3e; color: #bc9c22; border: 1px solid #5a5a6a;">
                                <option value="1">1 post per day</option>
                                <option value="2">2 posts per day</option>
                                <option value="3">3 posts per day</option>
                                <option value="5">5 posts per day</option>
                                <option value="unlimited">Unlimited</option>
                            </select>
                            <p class="help-text" style="color: #bc9c22; margin-top: 0.5rem;">Limit how many buildings can be posted in a single day</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="autoPostTemplate-2" style="color: #bc9c22;">Post Template</label>
                    <textarea id="autoPostTemplate-2" class="form-control" rows="10"
                              placeholder="Use {{name}}, {{size}}, {{price}}, {{type}} as placeholders">üè† New Arrival! {{name}}

üìê Size: {{size}}
üí∞ Cash Price: {{price}}
üìç Location: {{location}}

Call us at {{phone}} or visit our website to learn more!

#PortableBuildings #{{type}} #ForSale</textarea>
                    <p class="help-text" style="color: #bc9c22;">Customize the post message. Available placeholders: {{name}}, {{size}}, {{price}}, {{type}}, {{location}}, {{phone}}, {{rto36}}, {{rto48}}, {{rto60}}, {{rto72}}, {{rtoAll}}</p>
                </div>

                <div class="form-group" style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 8px; border: 2px solid #bc9c22;">
                    <h3 style="margin-top: 0; color: #bc9c22; font-size: 1.1rem;">üß™ Test Facebook Posting</h3>
                    <p class="help-text" style="margin-bottom: 1rem; color: #bc9c22;">Send a test post to your Facebook page using a sample building from your inventory.</p>
                    <button class="btn btn-warning" onclick="testFacebookPost()" id="test-fb-btn-2">
                        üì§ Send Test Post to Facebook
                    </button>
                    <p id="test-fb-status-2" class="help-text" style="margin-top: 0.75rem; margin-bottom: 0; font-weight: 600; color: #bc9c22;"></p>
                </div>
            </div>

            <!-- Template Library Section -->
            <div class="card" style="background: white; padding: 2rem;">
                <h2 style="color: #1a1a2e; margin-bottom: 1rem;">üìã High-Converting Facebook Templates</h2>
                <p style="color: #555; margin-bottom: 1.5rem;">Choose from 10 research-backed templates designed for maximum engagement. Click "Use This Template" to auto-fill the template box above.</p>

                <div id="template-library-container" style="display: flex; flex-direction: column; gap: 1.5rem;">
                    <!-- Templates will be dynamically loaded here -->
                </div>
            </div>
            </div>
            <!-- End Facebook Marketing Section -->

            <!-- Google Business Profile Marketing Section (Hidden by default) -->
            <div id="marketing-google-section" style="display: none;">
                <div style="margin-bottom: 2rem;">
                    <button class="btn" style="background: #6c757d; color: white;" onclick="backToMarketingSelector()">
                        ‚Üê Back to Platforms
                    </button>
                </div>

                <div style="background: linear-gradient(135deg, #4285f4 0%, #34a853 100%); color: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; text-align: center;">
                    <svg style="width: 60px; height: 60px; margin-bottom: 1rem;" fill="white" viewBox="0 0 24 24">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    <h1 style="margin: 0 0 0.5rem 0; color: white;">Google Business Profile Marketing</h1>
                    <p style="margin: 0; color: rgba(255,255,255,0.9);">Post updates that appear in Google Search and Google Maps</p>
                </div>

                <!-- Google Business Profile Settings -->
                <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                    <h2 style="color: #bc9c22;">Google Business Profile Auto-Posting</h2>
                    <p class="help-text" style="color: #bc9c22;">Connect your Google Business Profile to automatically post new inventory as updates that appear in Google Search and Maps.</p>

                    <!-- GBP Connection Status -->
                    <div id="gbp-connected" style="display: none; background: #d4edda; border-left: 4px solid #28a745; padding: 1.25rem; border-radius: 6px; margin-bottom: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                            <span style="font-size: 2rem;">‚úÖ</span>
                            <div style="flex: 1;">
                                <strong style="color: #155724; font-size: 1.05rem;">Google Business Profile Connected</strong>
                                <p style="margin: 0.25rem 0 0 0; color: #155724; font-size: 0.9rem;">
                                    Business: <strong id="connected-gbp-account"></strong><br>
                                    Location: <strong id="connected-gbp-location"></strong>
                                </p>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary btn-sm" onclick="openLocationSelector()" id="change-location-btn" style="display: none;">Change Location</button>
                                <button class="btn btn-danger btn-sm" onclick="disconnectGoogleBusiness()">Disconnect</button>
                            </div>
                        </div>
                    </div>

                    <div id="gbp-not-connected" style="background: #f8f9fa; border: 2px dashed #dee2e6; padding: 2rem; border-radius: 8px; text-align: center; margin-bottom: 1.5rem;">
                        <h3 style="color: #495057; margin-bottom: 1rem;">Connect Your Google Business Profile</h3>
                        <p style="color: #6c757d; margin-bottom: 1.5rem;">Click the button below to securely connect your Google Business Profile. Your posts will appear in Google Search and Maps!</p>
                        <button class="btn btn-primary" onclick="connectGoogleBusinessOAuth()" style="background: #4285f4; padding: 0.875rem 2rem; font-size: 1.05rem;">
                            <svg style="width: 20px; height: 20px; margin-right: 0.5rem; vertical-align: middle;" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                            </svg>
                            Connect with Google
                        </button>
                    </div>

                    <div class="setting-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="enableAutoPostGBP">
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Enable Auto-Posting to Google Business Profile</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label style="color: #bc9c22;">Auto-Post Conditions</label>
                        <div style="margin-top: 0.5rem; display: block;">
                            <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                                <input type="checkbox" id="autoPostNewOnlyGBP" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-text" style="color: #bc9c22;">Only post new inventory (not repos)</span>
                            </label>
                        </div>
                        <div style="display: block;">
                            <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                                <input type="checkbox" id="autoPostWithImagesGBP" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-text" style="color: #bc9c22;">Only post buildings with uploaded images</span>
                            </label>
                        </div>
                        <div style="display: block;">
                            <label class="toggle-label" style="display: inline-flex;">
                                <input type="checkbox" id="autoPostAvailableOnlyGBP" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-text" style="color: #bc9c22;">Only post available buildings (not sold/pending)</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="autoPostTemplateGBP" style="color: #bc9c22;">Post Template</label>
                        <textarea id="autoPostTemplateGBP" class="form-control" rows="8"
                                  placeholder="Use {{name}}, {{size}}, {{price}}, {{type}} as placeholders">üè† New Arrival! {{name}}

üìê Size: {{size}}
üí∞ Cash Price: {{price}}
üìç Location: {{location}}

Call {{phone}} or visit our website to learn more!

#PortableBuildings #{{type}} #ForSale</textarea>
                        <p class="help-text" style="color: #bc9c22;">Customize the post message. Available placeholders: {{name}}, {{size}}, {{price}}, {{type}}, {{location}}, {{phone}}, {{rto36}}, {{rto48}}, {{rto60}}, {{rto72}}, {{rtoAll}}</p>
                    </div>

                    <div class="form-group" style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 8px; border: 2px solid #bc9c22;">
                        <h3 style="margin-top: 0; color: #bc9c22; font-size: 1.1rem;">üß™ Test Google Business Post</h3>
                        <p class="help-text" style="margin-bottom: 1rem; color: #bc9c22;">Send a test post to your Google Business Profile using a sample building from your inventory.</p>
                        <button class="btn btn-warning" onclick="testGoogleBusinessPost()" id="test-gbp-btn">
                            üì§ Send Test Post to Google Business
                        </button>
                        <p id="test-gbp-status" class="help-text" style="margin-top: 0.75rem; margin-bottom: 0; font-weight: 600; color: #bc9c22;"></p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Site Customization Tab -->
        <div class="tab-content" id="customization-tab">
            <style>
                .customization-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1.5rem;
                    margin-bottom: 2rem;
                }

                .customization-grid .card {
                    margin-bottom: 0;
                }

                @media (max-width: 1024px) {
                    .customization-grid {
                        grid-template-columns: 1fr;
                    }
                }
            </style>

            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">üé® Site Customization</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Customize your website's appearance, business information, contact details, hours of operation, color scheme, welcome message, and hero carousel images.</p>
            </div>

            <div class="customization-grid">
            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Business Information</h2>

                <div class="form-group">
                    <label for="businessName" style="color: #bc9c22;">Business Name</label>
                    <input type="text" id="businessName" class="form-control"
                           placeholder="e.g., Community Portable Buildings">
                    <p class="help-text" style="color: #bc9c22;">This appears in the header of your website</p>
                </div>

                <div class="form-group">
                    <label for="businessPhone" style="color: #bc9c22;">Phone Number</label>
                    <input type="tel" id="businessPhone" class="form-control"
                           placeholder="e.g., 318-594-5909">
                    <p class="help-text" style="color: #bc9c22;">Main contact phone number for your business</p>
                </div>

                <div class="form-group">
                    <label for="businessEmail" style="color: #bc9c22;">Email Address</label>
                    <input type="email" id="businessEmail" class="form-control"
                           placeholder="e.g., info@yourcompany.com">
                    <p class="help-text" style="color: #bc9c22;">Business email for customer inquiries</p>
                </div>

                <div class="form-group">
                    <label for="businessAddress" style="color: #bc9c22;">Physical Address</label>
                    <textarea id="businessAddress" class="form-control" rows="2"
                              placeholder="e.g., 123 Main St, West Monroe, LA 71291"></textarea>
                    <p class="help-text" style="color: #bc9c22;">Your business location (optional)</p>
                </div>

                <div class="form-group">
                    <label for="facebookUrl" style="color: #bc9c22;">Facebook Page URL</label>
                    <input type="url" id="facebookUrl" class="form-control"
                           placeholder="e.g., https://facebook.com/yourpage">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Facebook page</p>
                </div>

                <div class="form-group">
                    <label for="instagramUrl" style="color: #bc9c22;">Instagram Profile URL</label>
                    <input type="url" id="instagramUrl" class="form-control"
                           placeholder="e.g., https://instagram.com/yourprofile">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Instagram profile</p>
                </div>

                <div class="form-group">
                    <label for="twitterUrl" style="color: #bc9c22;">Twitter/X Profile URL</label>
                    <input type="url" id="twitterUrl" class="form-control"
                           placeholder="e.g., https://twitter.com/yourprofile">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Twitter/X profile (optional)</p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Location Hours</h2>
                <p class="help-text" style="color: #bc9c22;">Set your business hours to display on your website footer</p>

                <div class="hours-grid" style="display: grid; gap: 1rem;">
                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-monday-enabled" onchange="toggleDayHours('monday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Monday</strong>
                        </label>
                        <div id="hours-monday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-monday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-monday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-tuesday-enabled" onchange="toggleDayHours('tuesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Tuesday</strong>
                        </label>
                        <div id="hours-tuesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-tuesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-tuesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-wednesday-enabled" onchange="toggleDayHours('wednesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Wednesday</strong>
                        </label>
                        <div id="hours-wednesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-wednesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-wednesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-thursday-enabled" onchange="toggleDayHours('thursday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Thursday</strong>
                        </label>
                        <div id="hours-thursday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-thursday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-thursday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-friday-enabled" onchange="toggleDayHours('friday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Friday</strong>
                        </label>
                        <div id="hours-friday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-friday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-friday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-saturday-enabled" onchange="toggleDayHours('saturday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Saturday</strong>
                        </label>
                        <div id="hours-saturday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-saturday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-saturday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-sunday-enabled" onchange="toggleDayHours('sunday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Sunday</strong>
                        </label>
                        <div id="hours-sunday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-sunday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-sunday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>
                </div>

                <p class="help-text" style="margin-top: 1rem; color: #bc9c22;">Check the days you're open and set the hours. Leave unchecked for closed days.</p>
            </div>


            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Color Scheme</h2>
                <p class="help-text" style="color: #bc9c22;">Choose a professional 2-color gradient scheme</p>

                <div class="color-schemes">
                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="rustic-earth" checked>
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #3D7A40 0%, #2C5F2D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Rustic Earth</h3>
                                <p>Fresh pine to deep forest - natural & professional</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #3D7A40;" title="Fresh Pine"></span>
                                    <span class="color-dot" style="background: #2C5F2D;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="modern-ranch">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #8B3236 0%, #7C2529 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Modern Ranch</h3>
                                <p>Warm barn red to deep burgundy - bold & confident</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #8B3236;" title="Warm Red"></span>
                                    <span class="color-dot" style="background: #7C2529;" title="Barn Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="desert-timber">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #C19A6B 0%, #8B7355 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Desert Timber</h3>
                                <p>Warm sand to rich wood - inviting & warm</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #C19A6B;" title="Desert Sand"></span>
                                    <span class="color-dot" style="background: #8B7355;" title="Rich Wood"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="slate-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #4A5568 0%, #2D3748 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Slate Blue</h3>
                                <p>Cool gray to deep slate - professional & modern</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #4A5568;" title="Slate Gray"></span>
                                    <span class="color-dot" style="background: #2D3748;" title="Deep Slate"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="forest-sage">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6B8E6F 0%, #4A6B4E 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Forest Sage</h3>
                                <p>Soft sage to forest green - calm & natural</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6B8E6F;" title="Sage Green"></span>
                                    <span class="color-dot" style="background: #4A6B4E;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="navy-steel">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #2C5282 0%, #1A365D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Navy Steel</h3>
                                <p>Steel blue to deep navy - trustworthy & strong</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #2C5282;" title="Steel Blue"></span>
                                    <span class="color-dot" style="background: #1A365D;" title="Deep Navy"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="autumn-oak">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #A0522D 0%, #6B4423 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Autumn Oak</h3>
                                <p>Burnt sienna to rich oak - rustic & grounded</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #A0522D;" title="Burnt Sienna"></span>
                                    <span class="color-dot" style="background: #6B4423;" title="Rich Oak"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="pewter-charcoal">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6C757D 0%, #495057 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Pewter Charcoal</h3>
                                <p>Soft pewter to charcoal - elegant & timeless</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6C757D;" title="Pewter"></span>
                                    <span class="color-dot" style="background: #495057;" title="Charcoal"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="classic-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Classic Blue</h3>
                                <p>Professional royal blue - trustworthy & corporate</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #1E40AF;" title="Royal Blue"></span>
                                    <span class="color-dot" style="background: #1E3A8A;" title="Deep Blue"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="crimson-red">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #B91C1C 0%, #7F1D1D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Crimson Red</h3>
                                <p>Bold crimson to dark red - powerful & energetic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #B91C1C;" title="Crimson"></span>
                                    <span class="color-dot" style="background: #7F1D1D;" title="Dark Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="olive-green">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #65A30D 0%, #4D7C0F 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Olive Green</h3>
                                <p>Natural olive to deep green - earthy & organic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #65A30D;" title="Olive"></span>
                                    <span class="color-dot" style="background: #4D7C0F;" title="Deep Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="royal-purple">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Royal Purple</h3>
                                <p>Regal violet to deep purple - luxurious & creative</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #7C3AED;" title="Violet"></span>
                                    <span class="color-dot" style="background: #5B21B6;" title="Royal Purple"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="sunset-orange">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #EA580C 0%, #9A3412 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Sunset Orange</h3>
                                <p>Warm orange to burnt sienna - vibrant & welcoming</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #EA580C;" title="Orange"></span>
                                    <span class="color-dot" style="background: #9A3412;" title="Burnt Orange"></span>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 2rem;">
                    <label for="buttonColor" style="color: #bc9c22;">Custom Button Color (Optional)</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="color" id="buttonColor" class="color-picker" value="#2C5F2D">
                        <input type="text" id="buttonColorHex" class="form-control" placeholder="#2C5F2D" style="max-width: 150px;">
                        <button class="btn btn-secondary btn-sm" onclick="resetButtonColor()">Reset</button>
                    </div>
                    <p class="help-text" style="color: #bc9c22;">Customize the button color on product cards (overrides scheme default)</p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Welcome Message</h2>

                <div class="form-group">
                    <label for="welcomeTitle" style="color: #bc9c22;">Title</label>
                    <input type="text" id="welcomeTitle" class="form-control"
                           value="Welcome to Community Portable Buildings of West Monroe, LA and Columbia, LA">
                </div>

                <div class="form-group">
                    <label for="welcomeMessage" style="color: #bc9c22;">Message</label>
                    <textarea id="welcomeMessage" class="form-control" rows="3">Take a look at what we have in stock, and let us know if we can design you a custom Graceland Building or help in any way!</textarea>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Hero Carousel Images</h2>
                <p class="help-text" style="color: #bc9c22;">Current images in the carousel. Drag to reorder, click X to remove.</p>

                <div id="carousel-images" class="carousel-manager">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="form-group">
                    <label for="newCarouselImage" style="color: #bc9c22;">Add New Image (filename from root directory)</label>
                    <div class="input-group">
                        <input type="text" id="newCarouselImage" class="form-control"
                               placeholder="e.g., Cabin-12x24-Angle.jpg">
                        <button class="btn btn-secondary" onclick="addCarouselImage()">Add Image</button>
                    </div>
                </div>
            </div>
            </div><!-- End customization-grid -->

            <button class="btn btn-primary btn-lg" onclick="saveCustomization()">üíæ Save All Customization</button>
        </div>
        <!-- End Site Customization Tab -->

        <!-- Inventory Settings Tab -->
        <div class="tab-content" id="inventory-tab">
            <style>
                /* Bubble button toggle styles */
                .setting-row {
                    margin-bottom: 2rem;
                }

                .setting-label {
                    font-weight: 600;
                    color: #bc9c22;
                    font-size: 0.95rem;
                    margin-bottom: 0.75rem;
                    display: block;
                }

                .bubble-group {
                    display: flex;
                    gap: 0.75rem;
                    margin-bottom: 0.5rem;
                }

                .bubble-btn {
                    flex: 1;
                    padding: 0.75rem 1.5rem;
                    background: rgba(255, 255, 255, 0.03);
                    border: 2px solid #5a5a6a;
                    border-radius: 24px;
                    color: #a8a8b8;
                    font-weight: 600;
                    font-size: 0.9rem;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    text-align: center;
                }

                .bubble-btn:hover {
                    border-color: #bc9c22;
                    background: rgba(188, 156, 34, 0.05);
                }

                .bubble-btn.active {
                    background: linear-gradient(135deg, #bc9c22 0%, #d4af37 100%);
                    border-color: #bc9c22;
                    color: #1a1a2e;
                    box-shadow: 0 4px 12px rgba(188, 156, 34, 0.3);
                }

                .setting-help {
                    font-size: 0.85rem;
                    color: #a8a8b8;
                    line-height: 1.4;
                    margin-top: 0.5rem;
                }
            </style>

            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Inventory Settings</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Configure your inventory sync with GPB Sales and customize how buildings display on your website. Control pricing visibility, repo building appearance, sort order, and sold building behavior. Set up automatic daily syncing to keep your inventory up-to-date.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">GPB Sync Settings</h2>
                <p class="help-text" style="color: #bc9c22;">Configure your GPB Sales credentials to automatically sync your inventory. Your credentials are encrypted and stored securely.</p>

                <div class="form-group">
                    <label for="gpbUsername" style="color: #bc9c22;">GPB Sales Username/Email</label>
                    <input type="email" id="gpbUsername" class="form-control"
                           placeholder="Enter your GPB Sales email">
                    <p class="help-text" style="color: #bc9c22;">Your login email for GPB Sales portal</p>
                </div>

                <div class="form-group">
                    <label for="gpbPassword" style="color: #bc9c22;">GPB Sales Password</label>
                    <input type="password" id="gpbPassword" class="form-control"
                           placeholder="Enter your GPB Sales password">
                    <p class="help-text" style="color: #bc9c22;">Your password will be encrypted before storage</p>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoSyncEnabled">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text" style="color: #bc9c22;">Enable Automatic Daily Sync at 2 AM</span>
                    </label>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-primary" onclick="saveGpbCredentials()">
                        Save Credentials
                    </button>
                    <button class="btn btn-secondary" onclick="triggerUserSync()" id="user-sync-btn">
                        üîÑ Sync Now
                    </button>
                </div>
                <p id="gpb-status" class="help-text" style="margin-top: 1rem; font-weight: 600; color: #bc9c22;"></p>

                <div style="background: rgba(33, 150, 243, 0.1); border-left: 4px solid #2196f3; padding: 1.25rem; margin-top: 1.5rem; border-radius: 6px;">
                    <p style="margin: 0; color: #2196f3; font-weight: 600; font-size: 1rem;">üì± Manage on the Go!</p>
                    <p style="margin: 0.75rem 0 0 0; color: #a8a8b8; line-height: 1.6;">
                        You can log in to your admin panel from your phone and access the <strong style="color: #fff;">Manage Buildings</strong> tab to upload photos directly to your listings from your mobile device. Perfect for adding photos while you're at the lot!
                    </p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Display & Inventory Options</h2>
                <p class="help-text" style="color: #bc9c22; margin-bottom: 2rem;">Customize how your buildings and pricing appear on your website</p>

                <!-- Show Cash Prices -->
                <div class="setting-row">
                    <label class="setting-label">üí∞ Show Cash Prices</label>
                    <div class="bubble-group">
                        <button type="button" class="bubble-btn active" data-setting="showCashPrice" data-value="true" onclick="selectBubble(this, 'showCashPrice', true)">
                            Enabled
                        </button>
                        <button type="button" class="bubble-btn" data-setting="showCashPrice" data-value="false" onclick="selectBubble(this, 'showCashPrice', false)">
                            Disabled
                        </button>
                    </div>
                    <div class="setting-help">Display cash prices on building cards</div>
                </div>

                <!-- Show RTO Options -->
                <div class="setting-row">
                    <label class="setting-label">üìÖ Show Rent-to-Own Options</label>
                    <div class="bubble-group">
                        <button type="button" class="bubble-btn active" data-setting="showRtoOptions" data-value="true" onclick="selectBubble(this, 'showRtoOptions', true)">
                            Enabled
                        </button>
                        <button type="button" class="bubble-btn" data-setting="showRtoOptions" data-value="false" onclick="selectBubble(this, 'showRtoOptions', false)">
                            Disabled
                        </button>
                    </div>
                    <div class="setting-help">Display rent-to-own payment options on building cards</div>
                </div>

                <!-- Repo Sort Order -->
                <div class="setting-row">
                    <label class="setting-label">üìç Repo Building Position</label>
                    <div class="bubble-group">
                        <button type="button" class="bubble-btn active" data-setting="repoSortOrder" data-value="last" onclick="selectBubble(this, 'repoSortOrder', 'last')">
                            Show Last
                        </button>
                        <button type="button" class="bubble-btn" data-setting="repoSortOrder" data-value="first" onclick="selectBubble(this, 'repoSortOrder', 'first')">
                            Show First
                        </button>
                    </div>
                    <div class="setting-help">Control whether repo buildings appear at the beginning or end of inventory</div>
                </div>

                <!-- Repo Price Display -->
                <div class="setting-row">
                    <label class="setting-label">üíµ Repo Price Style</label>
                    <div class="bubble-group">
                        <button type="button" class="bubble-btn active" data-setting="repoPriceDisplay" data-value="strikethrough" onclick="selectBubble(this, 'repoPriceDisplay', 'strikethrough')">
                            Strikethrough
                        </button>
                        <button type="button" class="bubble-btn" data-setting="repoPriceDisplay" data-value="discounted" onclick="selectBubble(this, 'repoPriceDisplay', 'discounted')">
                            Discounted
                        </button>
                    </div>
                    <div class="setting-help">
                        <strong>Strikethrough:</strong> Shows original price crossed out with "Call for Pre-Owned Price"<br>
                        <strong>Discounted:</strong> Auto-calculates: 2024 = 5%, 2023 = 10%, 2022 = 15%, 2021+ = 20% off
                    </div>
                </div>

                <!-- Sold Building Behavior -->
                <div class="setting-row">
                    <label class="setting-label">üóëÔ∏è Sold Building Handling</label>
                    <div class="bubble-group">
                        <button type="button" class="bubble-btn active" data-setting="soldBuildingBehavior" data-value="auto-delete" onclick="selectBubble(this, 'soldBuildingBehavior', 'auto-delete')">
                            Auto-Delete
                        </button>
                        <button type="button" class="bubble-btn" data-setting="soldBuildingBehavior" data-value="manual-delete" onclick="selectBubble(this, 'soldBuildingBehavior', 'manual-delete')">
                            Manual Delete
                        </button>
                    </div>
                    <div class="setting-help">
                        <strong>Auto-Delete:</strong> Pending (2 days) ‚Üí Sold (2 days) ‚Üí Auto-removed<br>
                        <strong>Manual Delete:</strong> Pending (2 days) ‚Üí Sold (stays until manual delete)
                    </div>
                </div>

                <button class="btn btn-primary" onclick="saveInventorySettings()" style="margin-top: 2rem;">Save Inventory Settings</button>
            </div>
        </div>

        <!-- Domain & Website Tab -->
        <div class="tab-content" id="domain-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Domain & Website Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Control your website's web address and view statistics. Choose a free shed-sync.com subdomain or connect your own custom domain. View metrics on your total buildings, available inventory, and uploaded photos.</p>
            </div>

            <!-- Dark Theme Domain Management with Yellow Accents -->
            <style>
                .domain-card {
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 12px;
                    padding: 2rem;
                    margin-bottom: 2rem;
                    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                    border: 1px solid #2a2a3e;
                }

                .domain-card h2 {
                    color: #ffd60a;
                    margin-bottom: 0.5rem;
                    font-size: 1.75rem;
                    font-weight: 700;
                }

                .domain-card p {
                    color: #a8a8b8;
                    margin-bottom: 1.5rem;
                }

                .domain-url-display {
                    background: #0f1419;
                    border: 2px solid #ffd60a;
                    border-radius: 8px;
                    padding: 1.25rem;
                    font-family: 'Courier New', monospace;
                    font-size: 1.125rem;
                    color: #ffd60a;
                    text-align: center;
                    font-weight: 600;
                    margin: 1.5rem 0;
                    box-shadow: 0 0 20px rgba(255, 214, 10, 0.15);
                }

                .domain-badge {
                    display: inline-block;
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-size: 0.875rem;
                    font-weight: 700;
                    margin-left: 1rem;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                }

                .domain-action-btn {
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    border: none;
                    padding: 0.875rem 2rem;
                    border-radius: 8px;
                    font-weight: 700;
                    font-size: 1rem;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                    margin-right: 1rem;
                }

                .domain-action-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(255, 214, 10, 0.5);
                }

                .domain-action-btn:active {
                    transform: translateY(0);
                }

                .domain-section {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1.5rem;
                    border-left: 4px solid #ffd60a;
                }

                .domain-section h3 {
                    color: #fff;
                    margin-bottom: 1rem;
                    font-size: 1.25rem;
                }

                .domain-input {
                    background: #0f1419;
                    border: 2px solid #2a2a3e;
                    color: #fff;
                    padding: 0.875rem;
                    border-radius: 8px;
                    font-size: 1rem;
                    width: 100%;
                    transition: border-color 0.3s ease;
                }

                .domain-input:focus {
                    outline: none;
                    border-color: #ffd60a;
                    box-shadow: 0 0 0 3px rgba(255, 214, 10, 0.1);
                }

                .domain-input::placeholder {
                    color: #5a5a6a;
                }

                .dns-instructions {
                    background: #0f1419;
                    border: 1px solid #2a2a3e;
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1rem;
                }

                .dns-instructions h4 {
                    color: #ffd60a;
                    margin-bottom: 1rem;
                    font-size: 1.125rem;
                }

                .dns-record {
                    background: rgba(255, 214, 10, 0.05);
                    border-left: 3px solid #ffd60a;
                    padding: 1rem;
                    margin: 0.75rem 0;
                    border-radius: 4px;
                }

                .dns-record code {
                    color: #ffd60a;
                    font-family: 'Courier New', monospace;
                    background: #1a1a2e;
                    padding: 0.25rem 0.5rem;
                    border-radius: 4px;
                }

                .dns-record strong {
                    color: #fff;
                }

                .verification-status {
                    display: inline-flex;
                    align-items: center;
                    gap: 0.5rem;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-weight: 600;
                    font-size: 0.875rem;
                }

                .verification-status.pending {
                    background: rgba(255, 152, 0, 0.15);
                    color: #ff9800;
                    border: 1px solid #ff9800;
                }

                .verification-status.verified {
                    background: rgba(76, 175, 80, 0.15);
                    color: #4caf50;
                    border: 1px solid #4caf50;
                }

                .verification-status.failed {
                    background: rgba(244, 67, 54, 0.15);
                    color: #f44336;
                    border: 1px solid #f44336;
                }

                .help-note {
                    color: #a8a8b8;
                    font-size: 0.9rem;
                    margin-top: 0.75rem;
                    line-height: 1.6;
                }

                .copy-btn {
                    background: rgba(255, 214, 10, 0.1);
                    border: 1px solid #ffd60a;
                    color: #ffd60a;
                    padding: 0.375rem 0.75rem;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.875rem;
                    font-weight: 600;
                    transition: all 0.2s ease;
                    margin-left: 0.5rem;
                }

                .copy-btn:hover {
                    background: rgba(255, 214, 10, 0.2);
                }
            </style>

            <!-- Subdomain Picker (shown if user doesn't have subdomain) -->
            <div class="domain-card" id="subdomain-picker-card" style="display: none;">
                <h2>üåê Choose Your Website Address</h2>
                <p>Pick a unique subdomain for your website. This will be your permanent web address.</p>

                <div class="domain-section">
                    <div class="form-group">
                        <label style="color: #ffd60a; font-weight: 600; display: block; margin-bottom: 0.75rem;">
                            Your Subdomain
                        </label>
                        <div style="display: flex; gap: 0.75rem; align-items: center;">
                            <input type="text"
                                   id="subdomain-input"
                                   class="domain-input"
                                   placeholder="yourbusiness"
                                   style="flex: 1; text-transform: lowercase;"
                                   oninput="checkSubdomainAvailability()">
                            <span style="color: #a8a8b8; font-weight: 600; white-space: nowrap;">.shed-sync.com</span>
                        </div>
                        <div id="subdomain-validation" style="margin-top: 0.75rem; font-weight: 600; display: none;">
                            <!-- Validation message will appear here -->
                        </div>
                        <p class="help-note">
                            üí° Use 3-30 characters: lowercase letters, numbers, and hyphens. Cannot start or end with a hyphen.<br>
                            <strong style="color: #ffd60a;">Example:</strong> mountain-sheds ‚Üí mountain-sheds.shed-sync.com
                        </p>
                    </div>

                    <button class="domain-action-btn" onclick="saveSubdomain()" id="save-subdomain-btn" disabled style="opacity: 0.5; cursor: not-allowed;">
                        üíæ Claim This Subdomain
                    </button>
                </div>
            </div>

            <!-- Your Subdomain (shown if user has subdomain) -->
            <div class="domain-card" id="subdomain-display-card" style="display: none;">
                <h2>üåê Your Website Address</h2>
                <p>Your website is live at:</p>

                <div class="domain-url-display" id="subdomain-url">
                    Loading...
                </div>

                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="domain-action-btn" onclick="viewLiveSite()">
                        üöÄ View Live Site
                    </button>
                    <button class="domain-action-btn" onclick="copySubdomainUrl()">
                        üìã Copy URL
                    </button>
                </div>
            </div>

            <!-- Custom Domain Section -->
            <div class="domain-card">
                <h2>üéØ Connect Your Own Domain</h2>
                <p>Want to use your own domain name? Connect it here (e.g., buytheshed.com)</p>

                <div class="domain-section">
                    <h3>Custom Domain</h3>

                    <!-- Domain Status Display (always visible when domain exists) -->
                    <div id="custom-domain-status" style="display: none; margin-bottom: 1.5rem;">
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 8px; padding: 1.25rem; border: 2px solid #ffd60a;">
                            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                                <div style="flex: 1;">
                                    <div style="color: #ffd60a; font-weight: 600; margin-bottom: 0.5rem;">Current Domain:</div>
                                    <div style="font-size: 1.25rem; color: #fff; font-weight: 600;" id="current-custom-domain-text"></div>
                                </div>
                                <div>
                                    <span class="verification-status" id="domain-verification-badge">
                                        ‚è≥ Pending Verification
                                    </span>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="domain-action-btn" onclick="checkDomainVerification()" id="check-verification-btn" style="background: #2196f3;">
                                    üîÑ Check Status
                                </button>
                                <button class="domain-action-btn" onclick="removeCustomDomain()" style="background: #f44336;">
                                    üóëÔ∏è Remove Domain
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Input Form -->
                    <div id="custom-domain-form">
                        <div class="form-group">
                            <label style="color: #ffd60a; font-weight: 600; display: block; margin-bottom: 0.75rem;">
                                Enter Your Domain
                            </label>
                            <input type="text"
                                   id="custom-domain-input"
                                   class="domain-input"
                                   placeholder="Enter your domain (e.g., yourdomain.com)"
                                   style="margin-bottom: 1rem;">
                            <p class="help-note">
                                üí° Enter just the domain name without http:// or www. Example: <strong style="color: #ffd60a;">yourdomain.com</strong>
                            </p>
                        </div>

                        <button class="domain-action-btn" onclick="saveCustomDomain()">
                            üíæ Save Custom Domain
                        </button>
                    </div>
                </div>

                <!-- DNS Instructions -->
                <div class="dns-instructions" id="dns-instructions" style="display: none;">
                    <h4>‚öôÔ∏è DNS Configuration Required</h4>
                    <p style="color: #a8a8b8; margin-bottom: 1.5rem;">
                        Follow these steps to connect your custom domain. You'll need to add <strong>THREE</strong> DNS records:
                    </p>

                    <div style="background: rgba(255, 214, 10, 0.08); border-left: 3px solid #ffd60a; padding: 1.25rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #ffd60a; display: block; margin-bottom: 1rem;">üìã Step-by-Step Guide:</strong>

                        <ol style="color: #a8a8b8; margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong style="color: #fff;">Log in to your domain registrar</strong> (GoDaddy, Namecheap, etc.) and go to DNS settings</li>
                            <li><strong style="color: #fff;">Find your domain</strong> (e.g., yourdomain.com) and click "DNS" or "Manage DNS"</li>
                            <li><strong style="color: #fff;">Add the following three records:</strong></li>
                        </ol>
                    </div>

                    <div style="background: rgba(33, 150, 243, 0.1); border-left: 3px solid #2196f3; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #2196f3; display: block; margin-bottom: 0.75rem;">Records 1 & 2: A Records (for root domain)</strong>
                        <p style="color: #a8a8b8; margin: 0 0 1rem 0; font-size: 0.9rem;">Add BOTH of these A records to make yourdomain.com work</p>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0;">
                        <strong>Type:</strong> <code>A</code><br>
                        <strong>Name:</strong> <code>@</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;">(this means root domain)</span><br>
                        <strong>Value/Points to:</strong> <code>76.76.21.93</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('76.76.21.93').then(() => alert('‚úì Copied to clipboard!'))">üìã Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0; background: rgba(255, 214, 10, 0.05); padding: 1rem; border-radius: 4px;">
                        <strong>Type:</strong> <code>A</code><br>
                        <strong>Name:</strong> <code>@</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;">(same as above - add a second A record)</span><br>
                        <strong>Value/Points to:</strong> <code>76.76.21.123</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('76.76.21.123').then(() => alert('‚úì Copied to clipboard!'))">üìã Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div style="background: rgba(33, 150, 243, 0.1); border-left: 3px solid #2196f3; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #2196f3; display: block; margin-bottom: 0.75rem;">Record 3: CNAME Record (for www subdomain)</strong>
                        <p style="color: #a8a8b8; margin: 0 0 1rem 0; font-size: 0.9rem;">This makes www.yourdomain.com work</p>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0;">
                        <strong>Type:</strong> <code>CNAME</code><br>
                        <strong>Name:</strong> <code>www</code><br>
                        <strong>Value/Points to:</strong> <code>cname.vercel-dns.com</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('cname.vercel-dns.com').then(() => alert('‚úì Copied to clipboard!'))">üìã Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); border-left: 3px solid #4caf50; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #4caf50; display: block; margin-bottom: 0.75rem;">‚úì After Adding Both Records:</strong>
                        <p style="color: #a8a8b8; margin: 0; font-size: 0.9rem; line-height: 1.6;">
                            Both <code>yourdomain.com</code> AND <code>www.yourdomain.com</code> will work!<br><br>
                            The A record makes your root domain work, and the CNAME makes the www subdomain work. This is the standard setup used by professional websites.
                        </p>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.05); border-left: 3px solid #a8a8b8; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #a8a8b8; font-size: 0.9rem;">‚ö†Ô∏è Common Issues:</strong>
                        <ul style="color: #a8a8b8; margin: 0.5rem 0 0 1.5rem; font-size: 0.85rem; line-height: 1.6;">
                            <li>If you see an existing "A" record for "www", <strong>delete it</strong> before adding the CNAME record</li>
                            <li>Make sure the A record uses <strong>"@"</strong> (or leave Name blank for root domain)</li>
                            <li>Make sure the CNAME record uses <strong>"www"</strong> not "@"</li>
                            <li>Don't include "http://" or "https://" in any Value field</li>
                            <li>Some registrars automatically add the domain to the end - use their help docs if confused</li>
                        </ul>
                    </div>

                    <p class="help-note" style="margin-top: 1rem; font-size: 0.9rem;">
                        ‚è±Ô∏è <strong>Timing:</strong> DNS changes typically take 5-60 minutes to propagate (sometimes up to 24 hours). We'll automatically verify your domain once the DNS is configured correctly.
                    </p>

                    <p class="help-note" style="background: rgba(33, 150, 243, 0.1); padding: 0.75rem; border-radius: 4px; border-left: 3px solid #2196f3;">
                        üí° <strong>Why both records?</strong> The A record points your root domain (yourdomain.com) to our server, and the CNAME points the www subdomain to our Vercel hosting. Both records together ensure your site works with or without www.
                    </p>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="domain-card">
                <h2>üìä Website Statistics</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                    <div style="background: rgba(255, 214, 10, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffd60a;">
                        <div style="font-size: 2rem; color: #ffd60a; font-weight: 700;" id="building-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Buildings Listed</div>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #4caf50;">
                        <div style="font-size: 2rem; color: #4caf50; font-weight: 700;" id="available-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Available</div>
                    </div>
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <div style="font-size: 2rem; color: #2196f3; font-weight: 700;" id="photo-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Photos Uploaded</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leads Tab -->
        <div class="tab-content" id="leads-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Lead Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Track customer inquiries and manage your sales pipeline. Add new leads, update status, add notes, and never miss a follow-up.</p>
            </div>

            <!-- Quick Add Lead Form -->
            <div class="card" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 2px solid #ffd60a;">
                <h2 style="color: #ffd60a;">‚ûï Add New Lead</h2>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="form-group">
                        <label style="color: #fff;">Customer Name *</label>
                        <input type="text" id="new-lead-name" class="form-control" placeholder="John Smith" required>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Phone</label>
                        <input type="tel" id="new-lead-phone" class="form-control" placeholder="318-555-1234">
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Email</label>
                        <input type="email" id="new-lead-email" class="form-control" placeholder="john@example.com">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div class="form-group">
                        <label style="color: #fff;">Source</label>
                        <select id="new-lead-source" class="form-control">
                            <option value="website">Website</option>
                            <option value="facebook">Facebook</option>
                            <option value="phone">Phone Call</option>
                            <option value="walk-in">Walk-in</option>
                            <option value="referral">Referral</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Priority</label>
                        <select id="new-lead-priority" class="form-control">
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Interested Building (optional)</label>
                        <input type="text" id="new-lead-building" class="form-control" placeholder="Serial #">
                    </div>
                </div>

                <div class="form-group" style="margin-top: 1rem;">
                    <label style="color: #fff;">Notes</label>
                    <textarea id="new-lead-notes" class="form-control" rows="2" placeholder="Customer notes..."></textarea>
                </div>

                <button class="btn btn-primary btn-lg" onclick="addNewLead()" style="background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%); color: #1a1a2e; margin-top: 1rem;">
                    ‚ûï Add Lead
                </button>
            </div>

            <!-- Lead Pipeline -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="margin: 0;">üìä Sales Pipeline</h2>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div style="display: flex; gap: 0.75rem;">
                            <span style="background: #2196f3; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">üÜï <span id="new-count">0</span></span>
                            <span style="background: #ff9800; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">üìû <span id="contacted-count">0</span></span>
                            <span style="background: #9c27b0; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">üí∞ <span id="quoted-count">0</span></span>
                            <span style="background: #4caf50; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">‚úÖ <span id="sold-count">0</span></span>
                            <span style="background: #f44336; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">‚ùå <span id="lost-count">0</span></span>
                        </div>
                        <button class="btn btn-secondary" onclick="loadLeads()">üîÑ Refresh</button>
                    </div>
                </div>

                <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f8f9fa; border-bottom: 2px solid #e0e0e0;">
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Status</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Name</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Contact</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Building</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Date</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Source</th>
                            </tr>
                        </thead>
                        <tbody id="leads-table-body">
                            <!-- Lead rows will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <div id="empty-leads-message" style="display: none; padding: 3rem; text-align: center; color: #999;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìã</div>
                    <p style="margin: 0;">No leads yet. Add your first lead above!</p>
                </div>
            </div>
        </div>

        <!-- Lead Detail Modal -->
        <div class="modal" id="lead-modal" style="display: none;">
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <h2 id="lead-modal-title">Lead Details</h2>
                    <button class="modal-close" onclick="closeLeadModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="lead-modal-content">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Settings Tab -->
        <div class="tab-content" id="payments-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Subscription & Billing</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your Shed-Sync subscription and billing information. Update your payment method or view billing history.</p>
            </div>

            <div class="card">
                <h2>üí≥ Current Subscription</h2>

                <div id="subscription-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Plan</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-plan">Monthly Subscription</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Amount</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-amount">$99/month</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Status</div>
                            <div style="font-size: 1.25rem; font-weight: 600;" id="subscription-status">
                                <span style="color: #4caf50;">‚óè Active</span>
                            </div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Next Billing Date</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-next-billing">‚Äî</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Payment Method</h3>

                <div id="payment-method-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="font-size: 2rem;">üí≥</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;" id="card-info">No payment method on file</div>
                            <div style="color: #666; font-size: 0.875rem;" id="card-expires">‚Äî</div>
                        </div>
                        <button class="btn btn-secondary" onclick="updatePaymentMethod()">
                            Update Payment Method
                        </button>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Billing History</h3>

                <div id="billing-history" style="margin-bottom: 1.5rem;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e0e0e0; text-align: left;">
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Date</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Description</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Amount</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Status</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Receipt</th>
                            </tr>
                        </thead>
                        <tbody id="billing-history-body">
                            <tr>
                                <td colspan="5" style="padding: 2rem; text-align: center; color: #999;">
                                    Loading billing history...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-top: 2rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">Need help with billing?</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">
                        Contact our support team at <a href="mailto:billing@shed-sync.com" style="color: #856404; text-decoration: underline;">billing@shed-sync.com</a> for assistance with billing questions or to cancel your subscription.
                    </p>
                </div>
            </div>
        </div>

        <!-- Account Settings Tab -->
        <div class="tab-content" id="settings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Account Settings</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your account security. Update your Shed-Sync login password to keep your account secure.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Change Password</h2>
                <p class="help-text" style="color: #bc9c22;">Update your Shed-Sync login password</p>

                <div class="form-group">
                    <label for="currentPassword" style="color: #bc9c22;">Current Password</label>
                    <input type="password" id="currentPassword" class="form-control" placeholder="Enter your current password">
                </div>

                <div class="form-group">
                    <label for="newPassword" style="color: #bc9c22;">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password (min 8 characters)">
                    <p class="help-text" style="color: #bc9c22;">Must be at least 8 characters long</p>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" style="color: #bc9c22;">Confirm New Password</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm new password">
                </div>

                <button class="btn btn-primary" onclick="changePassword()">Change Password</button>
                <p id="password-change-status" class="help-text" style="margin-top: 1rem; font-weight: 600; color: #bc9c22;"></p>
            </div>
        </div>

        <!-- Other Lots Tab -->
        <div class="tab-content" id="lots-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Multi-Location Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Track inventory from multiple lot locations in one place. Add additional GPB Sales credentials for other locations, and buildings will automatically sync daily and display with their lot location tags on your website.</p>
            </div>

            <div class="card">
                <h2>Manage Other Lot Locations</h2>
                <p class="help-text">Track inventory from other lot locations. Buildings will be tagged with their lot location.</p>

                <div id="lots-list" class="lots-list">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Sync Inventory</h3>
                    <p class="help-text">‚úÖ Automatic sync runs daily at 2 AM. Or trigger a manual sync now:</p>
                    <button class="btn btn-primary" onclick="triggerManualSync()" id="manual-sync-btn">
                        üîÑ Run Manual Sync Now
                    </button>
                    <p id="sync-status" class="help-text" style="margin-top: 1rem; color: var(--text-light);"></p>
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Add New Lot Location</h3>

                    <!-- Multi-lot feature disabled message -->
                    <div id="multi-lot-disabled" style="display: none;">
                        <p class="help-text" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                            üìç Want to manage multiple lot locations? Contact DealerSync to find out how to add support for your other locations:<br>
                            <strong style="color: #2196f3; margin-top: 0.5rem; display: inline-block;">support@dealersync.com</strong>
                        </p>
                    </div>

                    <!-- Multi-lot feature enabled form -->
                    <div id="multi-lot-enabled" style="display: none;">
                        <p class="help-text">Enter GPB Sales credentials for another lot location. Buildings will be automatically synced daily and tagged with the lot name.</p>
                        <div class="form-group">
                            <label for="lot-name">Lot Name/Location</label>
                            <input type="text" id="lot-name" class="form-control" placeholder="e.g., Columbia, LA">
                        </div>
                        <div class="form-group">
                            <label for="lot-username">GPB Sales Username/Email</label>
                            <input type="email" id="lot-username" class="form-control" placeholder="Enter GPB Sales email">
                        </div>
                        <div class="form-group">
                            <label for="lot-password">GPB Sales Password</label>
                            <input type="password" id="lot-password" class="form-control" placeholder="Enter GPB Sales password">
                        </div>
                        <button class="btn btn-primary" onclick="addLot()">Add Lot Location</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Buildings Tab -->
        <div class="tab-content" id="buildings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Building Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">View and manage all your building inventory in one place. Upload photos, set custom pricing, mark buildings as sold or pending, decode serial numbers for details, and control which buildings appear on your public website.</p>
            </div>

            <div class="card">
                <h2>Manage Buildings</h2>

                <div class="admin-filters">
                    <div class="admin-filter-group">
                        <input type="text" id="building-search" class="form-control" placeholder="Search by serial number, size, or type...">
                    </div>
                    <div class="admin-filter-group">
                        <select id="building-status-filter" class="form-control">
                            <option value="all">All Buildings</option>
                            <option value="available">Available</option>
                            <option value="pending">Pending</option>
                            <option value="sold">Sold</option>
                            <option value="hidden">Hidden</option>
                        </select>
                        <select id="building-type-filter" class="form-control">
                            <option value="all">All Types</option>
                            <option value="new">New Inventory</option>
                            <option value="repo">Pre-Owned (Repo)</option>
                        </select>
                    </div>
                </div>

                <div class="buildings-list" id="buildings-list">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <div class="toast" id="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal" id="image-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Building Images</h2>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-building-info"></div>

                <div class="image-gallery" id="building-images">
                    <!-- Uploaded images will appear here -->
                </div>

                <div class="upload-section">
                    <label class="upload-btn">
                        <input type="file" id="image-upload" accept="image/*,.heic" multiple style="display: none;">
                        <span>üì∑ Upload Photos (Max 5)</span>
                    </label>
                    <p class="help-text">Supports JPG, PNG, HEIC. HEIC will be auto-converted. Drag images to reorder. Click ‚òÖ to set main image.</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeImageModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Feature Request Modal -->
    <div class="modal" id="feature-request-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üí° Request a Feature</h2>
                <button class="modal-close" onclick="closeFeatureRequest()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="help-text" style="margin-bottom: 1.5rem;">
                    Need a feature we don't have? Send us a message and we'll see what we can do!
                </p>

                <div class="form-group">
                    <label for="featureTitle">Feature Title</label>
                    <input type="text" id="featureTitle" class="form-control" placeholder="Brief title for your feature request" maxlength="100">
                </div>

                <div class="form-group">
                    <label for="featureDescription">Description</label>
                    <textarea id="featureDescription" class="form-control" rows="6" placeholder="Describe the feature you'd like to see and how it would help you..." maxlength="1000"></textarea>
                    <p class="help-text">Please be as detailed as possible so we can understand your needs.</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeFeatureRequest()">Cancel</button>
                    <button class="btn btn-primary" onclick="submitFeatureRequest()">Submit Request</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Google Business Location Selector Modal -->
    <div class="modal" id="location-selector-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìç Select Your Google Business Location</h2>
                <button class="modal-close" onclick="closeLocationSelector()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="help-text" style="margin-bottom: 1.5rem;">
                    Select which location you want to use for auto-posting to Google Business Profile. Posts will appear for this location in Google Search and Google Maps.
                </p>

                <div id="location-list" style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Locations will be populated here -->
                </div>

                <div id="location-loading" style="text-align: center; padding: 2rem;">
                    <p style="color: #6c757d;">Loading locations...</p>
                </div>

                <div id="location-error" style="display: none; background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 6px; margin-top: 1rem;">
                    <strong>Error:</strong> <span id="location-error-message"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLocationSelector()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="decoder.js?v=4"></script>
    <script src="inventory.js?v=4"></script>
    <script src="leads.js?v=1"></script>
    <script src="admin.js?v=4"></script>
    <script src="location-selector.js?v=1"></script>
</body>
</html>
