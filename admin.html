<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Community Portable Buildings</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <header class="admin-header">
        <div class="container">
            <h1>Admin Panel</h1>
            <div class="header-actions">
                <a href="index.html" target="_blank" class="btn btn-secondary">View Site</a>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="settings">Settings</button>
            <button class="tab-btn" data-tab="welcome">Welcome Message</button>
            <button class="tab-btn" data-tab="carousel">Hero Carousel</button>
            <button class="tab-btn" data-tab="lots">Other Lots</button>
            <button class="tab-btn" data-tab="buildings">Manage Buildings</button>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content active" id="settings-tab">
            <div class="card">
                <h2>Display Settings</h2>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="showCashPrice" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Show Cash Prices</span>
                    </label>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="showRtoOptions" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Show Rent-to-Own Options</span>
                    </label>
                </div>

                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
        </div>

        <!-- Welcome Message Tab -->
        <div class="tab-content" id="welcome-tab">
            <div class="card">
                <h2>Welcome Message</h2>

                <div class="form-group">
                    <label for="welcomeTitle">Title</label>
                    <input type="text" id="welcomeTitle" class="form-control"
                           value="Welcome to Community Portable Buildings of West Monroe, LA and Columbia, LA">
                </div>

                <div class="form-group">
                    <label for="welcomeMessage">Message</label>
                    <textarea id="welcomeMessage" class="form-control" rows="3">Take a look at what we have in stock, and let us know if we can design you a custom Graceland Building or help in any way!</textarea>
                </div>

                <button class="btn btn-primary" onclick="saveWelcomeMessage()">Save Welcome Message</button>
            </div>
        </div>

        <!-- Carousel Tab -->
        <div class="tab-content" id="carousel-tab">
            <div class="card">
                <h2>Hero Carousel Images</h2>
                <p class="help-text">Current images in the carousel. Drag to reorder, click X to remove.</p>

                <div id="carousel-images" class="carousel-manager">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="form-group">
                    <label for="newCarouselImage">Add New Image (filename from root directory)</label>
                    <div class="input-group">
                        <input type="text" id="newCarouselImage" class="form-control"
                               placeholder="e.g., Cabin-12x24-Angle.jpg">
                        <button class="btn btn-secondary" onclick="addCarouselImage()">Add Image</button>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="saveCarousel()">Save Carousel</button>
            </div>
        </div>

        <!-- Other Lots Tab -->
        <div class="tab-content" id="lots-tab">
            <div class="card">
                <h2>Manage Other Lot Locations</h2>
                <p class="help-text">Add credentials for other lot locations to sync their inventory to your site. Buildings will be tagged with their lot location.</p>

                <div id="lots-list" class="lots-list">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Add New Lot Location</h3>
                    <div class="form-group">
                        <label for="lot-name">Lot Name/Location</label>
                        <input type="text" id="lot-name" class="form-control" placeholder="e.g., Columbia, LA">
                    </div>
                    <div class="form-group">
                        <label for="lot-dealer-number">Dealer Number</label>
                        <input type="text" id="lot-dealer-number" class="form-control" placeholder="Enter dealer number">
                    </div>
                    <div class="form-group">
                        <label for="lot-password">Password</label>
                        <input type="password" id="lot-password" class="form-control" placeholder="Enter password">
                    </div>
                    <button class="btn btn-primary" onclick="addLot()">Add Lot</button>
                </div>
            </div>
        </div>

        <!-- Buildings Tab -->
        <div class="tab-content" id="buildings-tab">
            <div class="card">
                <h2>Manage Buildings</h2>

                <div class="admin-filters">
                    <div class="admin-filter-group">
                        <input type="text" id="building-search" class="form-control" placeholder="Search by serial number, size, or type...">
                    </div>
                    <div class="admin-filter-group">
                        <select id="building-status-filter" class="form-control">
                            <option value="all">All Buildings</option>
                            <option value="available">Available</option>
                            <option value="pending">Pending</option>
                            <option value="sold">Sold</option>
                            <option value="hidden">Hidden</option>
                        </select>
                        <select id="building-type-filter" class="form-control">
                            <option value="all">All Types</option>
                            <option value="new">New Inventory</option>
                            <option value="repo">Pre-Owned (Repo)</option>
                        </select>
                    </div>
                </div>

                <div class="buildings-list" id="buildings-list">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <div class="toast" id="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal" id="image-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Building Images</h2>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-building-info"></div>

                <div class="image-gallery" id="building-images">
                    <!-- Uploaded images will appear here -->
                </div>

                <div class="upload-section">
                    <label class="upload-btn">
                        <input type="file" id="image-upload" accept="image/*,.heic" multiple style="display: none;">
                        <span>ðŸ“· Upload Photos (Max 5)</span>
                    </label>
                    <p class="help-text">Supports JPG, PNG, HEIC. HEIC will be auto-converted. Drag images to reorder. Click â˜… to set main image.</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeImageModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="decoder.js"></script>
    <script src="inventory.js"></script>
    <script src="admin.js"></script>
</body>
</html>
