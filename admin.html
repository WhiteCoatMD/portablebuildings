<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Community Portable Buildings</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <script>
        // Check authentication before loading page
        const token = localStorage.getItem('auth_token');
        if (!token) {
            window.location.href = 'login.html';
        }
    </script>

    <header class="admin-header">
        <div class="container">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <img src="logo.png" alt="ShedSync Logo" style="height: 50px; width: auto;">
                <h1>Admin Panel</h1>
            </div>
            <div class="header-actions">
                <span id="user-email" style="margin-right: 1rem; color: #e0e0e0;"></span>
                <a href="super-admin.html" class="btn btn-secondary" id="super-admin-link" style="display: none; margin-right: 0.5rem;">Super Admin</a>
                <a href="#" id="view-site-link" target="_blank" class="btn btn-secondary" onclick="viewSiteFromHeader(event)">View Site</a>
                <button class="btn btn-secondary" onclick="logout()" style="margin-left: 0.5rem;">Logout</button>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="customization">Site Customization</button>
            <button class="tab-btn" data-tab="inventory">Inventory Settings</button>
            <button class="tab-btn" data-tab="domain">Domain & Website</button>
            <button class="tab-btn" data-tab="leads">Leads</button>
            <button class="tab-btn" data-tab="payments">Payment Settings</button>
            <button class="tab-btn" data-tab="settings">Account Settings</button>
            <button class="tab-btn" data-tab="lots">Other Lots</button>
            <button class="tab-btn" data-tab="buildings">Manage Buildings</button>
        </div>

        <!-- Site Customization Tab -->
        <div class="tab-content active" id="customization-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Site Customization</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Personalize your website's appearance, content, and branding. Update your business information, choose color schemes, set operating hours, configure inventory sync, and manage hero images. Changes save to your live site immediately after clicking "Save All Customization" at the bottom of this page.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Business Information</h2>

                <div class="form-group">
                    <label for="businessName" style="color: #bc9c22;">Business Name</label>
                    <input type="text" id="businessName" class="form-control"
                           placeholder="e.g., Community Portable Buildings">
                    <p class="help-text" style="color: #bc9c22;">This appears in the header of your website</p>
                </div>

                <div class="form-group">
                    <label for="businessPhone" style="color: #bc9c22;">Phone Number</label>
                    <input type="tel" id="businessPhone" class="form-control"
                           placeholder="e.g., 318-594-5909">
                    <p class="help-text" style="color: #bc9c22;">Main contact phone number for your business</p>
                </div>

                <div class="form-group">
                    <label for="businessEmail" style="color: #bc9c22;">Email Address</label>
                    <input type="email" id="businessEmail" class="form-control"
                           placeholder="e.g., info@yourcompany.com">
                    <p class="help-text" style="color: #bc9c22;">Business email for customer inquiries</p>
                </div>

                <div class="form-group">
                    <label for="businessAddress" style="color: #bc9c22;">Physical Address</label>
                    <textarea id="businessAddress" class="form-control" rows="2"
                              placeholder="e.g., 123 Main St, West Monroe, LA 71291"></textarea>
                    <p class="help-text" style="color: #bc9c22;">Your business location (optional)</p>
                </div>

                <div class="form-group">
                    <label for="facebookUrl" style="color: #bc9c22;">Facebook Page URL</label>
                    <input type="url" id="facebookUrl" class="form-control"
                           placeholder="e.g., https://facebook.com/yourpage">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Facebook page</p>
                </div>

                <div class="form-group">
                    <label for="instagramUrl" style="color: #bc9c22;">Instagram Profile URL</label>
                    <input type="url" id="instagramUrl" class="form-control"
                           placeholder="e.g., https://instagram.com/yourprofile">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Instagram profile</p>
                </div>

                <div class="form-group">
                    <label for="twitterUrl" style="color: #bc9c22;">Twitter/X Profile URL</label>
                    <input type="url" id="twitterUrl" class="form-control"
                           placeholder="e.g., https://twitter.com/yourprofile">
                    <p class="help-text" style="color: #bc9c22;">Link to your business Twitter/X profile (optional)</p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Location Hours</h2>
                <p class="help-text" style="color: #bc9c22;">Set your business hours to display on your website footer</p>

                <div class="hours-grid" style="display: grid; gap: 1rem;">
                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-monday-enabled" onchange="toggleDayHours('monday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Monday</strong>
                        </label>
                        <div id="hours-monday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-monday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-monday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-tuesday-enabled" onchange="toggleDayHours('tuesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Tuesday</strong>
                        </label>
                        <div id="hours-tuesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-tuesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-tuesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-wednesday-enabled" onchange="toggleDayHours('wednesday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Wednesday</strong>
                        </label>
                        <div id="hours-wednesday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-wednesday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-wednesday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-thursday-enabled" onchange="toggleDayHours('thursday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Thursday</strong>
                        </label>
                        <div id="hours-thursday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-thursday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-thursday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-friday-enabled" onchange="toggleDayHours('friday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Friday</strong>
                        </label>
                        <div id="hours-friday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-friday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-friday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-saturday-enabled" onchange="toggleDayHours('saturday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Saturday</strong>
                        </label>
                        <div id="hours-saturday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-saturday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-saturday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>

                    <div class="hours-day">
                        <label style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <input type="checkbox" id="hours-sunday-enabled" onchange="toggleDayHours('sunday')" style="width: 20px; height: 20px;">
                            <strong style="width: 100px;">Sunday</strong>
                        </label>
                        <div id="hours-sunday-inputs" style="display: none; margin-left: 120px; gap: 0.5rem; align-items: center;">
                            <input type="time" id="hours-sunday-open" class="form-control" style="display: inline-block; width: 120px;">
                            <span>to</span>
                            <input type="time" id="hours-sunday-close" class="form-control" style="display: inline-block; width: 120px;">
                        </div>
                    </div>
                </div>

                <p class="help-text" style="margin-top: 1rem; color: #bc9c22;">Check the days you're open and set the hours. Leave unchecked for closed days.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Facebook Auto-Posting</h2>
                <p class="help-text" style="color: #bc9c22;">Automatically post new building listings to your Facebook page</p>

                <div class="info-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">⚠️ Auto-Posting Requirements</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">Buildings will <strong>only</strong> auto-post to Facebook if they have:</p>
                    <ul style="margin: 0.5rem 0 0 1.5rem; color: #856404; font-size: 0.9rem;">
                        <li>At least one uploaded image</li>
                        <li>Valid pricing information</li>
                        <li>Complete building description (from serial number decoder)</li>
                    </ul>
                </div>

                <!-- Facebook Connection Status -->
                <div id="facebook-connected" style="display: none; background: #d4edda; border-left: 4px solid #28a745; padding: 1.25rem; border-radius: 6px; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                        <span style="font-size: 2rem;">✅</span>
                        <div style="flex: 1;">
                            <strong style="color: #155724; font-size: 1.05rem;">Facebook Page Connected</strong>
                            <p style="margin: 0.25rem 0 0 0; color: #155724; font-size: 0.9rem;">
                                Connected to: <strong id="connected-page-name"></strong>
                            </p>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="disconnectFacebook()">Disconnect</button>
                    </div>
                </div>

                <div id="facebook-not-connected" style="background: #f8f9fa; border: 2px dashed #dee2e6; padding: 2rem; border-radius: 8px; text-align: center; margin-bottom: 1.5rem;">
                    <h3 style="color: #495057; margin-bottom: 1rem;">Connect Your Facebook Page</h3>
                    <p style="color: #6c757d; margin-bottom: 1.5rem;">Click the button below to securely connect your Facebook page. No manual setup required!</p>
                    <button class="btn btn-primary" onclick="connectFacebookOAuth()" style="background: #1877f2; padding: 0.875rem 2rem; font-size: 1.05rem;">
                        <svg style="width: 20px; height: 20px; margin-right: 0.5rem; vertical-align: middle;" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        Connect with Facebook
                    </button>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="enableAutoPost">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text" style="color: #bc9c22;">Enable Auto-Posting to Facebook</span>
                    </label>
                </div>

                <div class="form-group">
                    <label style="color: #bc9c22;">Auto-Post Conditions</label>
                    <div style="margin-top: 0.5rem; display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostNewOnly" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post new inventory (not repos)</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="margin-bottom: 0.75rem; display: inline-flex;">
                            <input type="checkbox" id="autoPostWithImages" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post buildings with uploaded images</span>
                        </label>
                    </div>
                    <div style="display: block;">
                        <label class="toggle-label" style="display: inline-flex;">
                            <input type="checkbox" id="autoPostAvailableOnly" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Only post available buildings (not sold/pending)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="autoPostTemplate" style="color: #bc9c22;">Post Template</label>
                    <textarea id="autoPostTemplate" class="form-control" rows="6"
                              placeholder="Use {{name}}, {{size}}, {{price}}, {{type}} as placeholders">🏠 New Arrival! {{name}}

📐 Size: {{size}}
💰 Cash Price: {{price}}
📍 Location: {{location}}

Call us at {{phone}} or visit our website to learn more!

#PortableBuildings #{{type}} #ForSale</textarea>
                    <p class="help-text" style="color: #bc9c22;">Customize the post message. Available placeholders: {{name}}, {{size}}, {{price}}, {{type}}, {{location}}, {{phone}}, {{rto36}}, {{rto48}}, {{rto60}}, {{rto72}}, {{rtoAll}}</p>
                </div>

                <div class="form-group" style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 8px; border: 2px solid #bc9c22;">
                    <h3 style="margin-top: 0; color: #bc9c22; font-size: 1.1rem;">🧪 Test Facebook Posting</h3>
                    <p class="help-text" style="margin-bottom: 1rem; color: #bc9c22;">Send a test post to your Facebook page using a sample building from your inventory.</p>
                    <button class="btn btn-warning" onclick="testFacebookPost()" id="test-fb-btn">
                        📤 Send Test Post to Facebook
                    </button>
                    <p id="test-fb-status" class="help-text" style="margin-top: 0.75rem; margin-bottom: 0; font-weight: 600; color: #bc9c22;"></p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Color Scheme</h2>
                <p class="help-text" style="color: #bc9c22;">Choose a professional 2-color gradient scheme</p>

                <div class="color-schemes">
                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="rustic-earth" checked>
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #3D7A40 0%, #2C5F2D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Rustic Earth</h3>
                                <p>Fresh pine to deep forest - natural & professional</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #3D7A40;" title="Fresh Pine"></span>
                                    <span class="color-dot" style="background: #2C5F2D;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="modern-ranch">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #8B3236 0%, #7C2529 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Modern Ranch</h3>
                                <p>Warm barn red to deep burgundy - bold & confident</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #8B3236;" title="Warm Red"></span>
                                    <span class="color-dot" style="background: #7C2529;" title="Barn Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="desert-timber">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #C19A6B 0%, #8B7355 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Desert Timber</h3>
                                <p>Warm sand to rich wood - inviting & warm</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #C19A6B;" title="Desert Sand"></span>
                                    <span class="color-dot" style="background: #8B7355;" title="Rich Wood"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="slate-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #4A5568 0%, #2D3748 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Slate Blue</h3>
                                <p>Cool gray to deep slate - professional & modern</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #4A5568;" title="Slate Gray"></span>
                                    <span class="color-dot" style="background: #2D3748;" title="Deep Slate"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="forest-sage">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6B8E6F 0%, #4A6B4E 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Forest Sage</h3>
                                <p>Soft sage to forest green - calm & natural</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6B8E6F;" title="Sage Green"></span>
                                    <span class="color-dot" style="background: #4A6B4E;" title="Forest Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="navy-steel">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #2C5282 0%, #1A365D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Navy Steel</h3>
                                <p>Steel blue to deep navy - trustworthy & strong</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #2C5282;" title="Steel Blue"></span>
                                    <span class="color-dot" style="background: #1A365D;" title="Deep Navy"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="autumn-oak">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #A0522D 0%, #6B4423 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Autumn Oak</h3>
                                <p>Burnt sienna to rich oak - rustic & grounded</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #A0522D;" title="Burnt Sienna"></span>
                                    <span class="color-dot" style="background: #6B4423;" title="Rich Oak"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="pewter-charcoal">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #6C757D 0%, #495057 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Pewter Charcoal</h3>
                                <p>Soft pewter to charcoal - elegant & timeless</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #6C757D;" title="Pewter"></span>
                                    <span class="color-dot" style="background: #495057;" title="Charcoal"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="classic-blue">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Classic Blue</h3>
                                <p>Professional royal blue - trustworthy & corporate</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #1E40AF;" title="Royal Blue"></span>
                                    <span class="color-dot" style="background: #1E3A8A;" title="Deep Blue"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="crimson-red">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #B91C1C 0%, #7F1D1D 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Crimson Red</h3>
                                <p>Bold crimson to dark red - powerful & energetic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #B91C1C;" title="Crimson"></span>
                                    <span class="color-dot" style="background: #7F1D1D;" title="Dark Red"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="olive-green">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #65A30D 0%, #4D7C0F 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Olive Green</h3>
                                <p>Natural olive to deep green - earthy & organic</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #65A30D;" title="Olive"></span>
                                    <span class="color-dot" style="background: #4D7C0F;" title="Deep Green"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="royal-purple">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Royal Purple</h3>
                                <p>Regal violet to deep purple - luxurious & creative</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #7C3AED;" title="Violet"></span>
                                    <span class="color-dot" style="background: #5B21B6;" title="Royal Purple"></span>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="color-scheme-option">
                        <input type="radio" name="colorScheme" value="sunset-orange">
                        <div class="scheme-preview">
                            <div class="scheme-header">
                                <div class="scheme-gradient" style="background: linear-gradient(135deg, #EA580C 0%, #9A3412 100%);"></div>
                            </div>
                            <div class="scheme-info">
                                <h3>Sunset Orange</h3>
                                <p>Warm orange to burnt sienna - vibrant & welcoming</p>
                                <div class="scheme-colors">
                                    <span class="color-dot" style="background: #EA580C;" title="Orange"></span>
                                    <span class="color-dot" style="background: #9A3412;" title="Burnt Orange"></span>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="form-group" style="margin-top: 2rem;">
                    <label for="buttonColor" style="color: #bc9c22;">Custom Button Color (Optional)</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="color" id="buttonColor" class="color-picker" value="#2C5F2D">
                        <input type="text" id="buttonColorHex" class="form-control" placeholder="#2C5F2D" style="max-width: 150px;">
                        <button class="btn btn-secondary btn-sm" onclick="resetButtonColor()">Reset</button>
                    </div>
                    <p class="help-text" style="color: #bc9c22;">Customize the button color on product cards (overrides scheme default)</p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Welcome Message</h2>

                <div class="form-group">
                    <label for="welcomeTitle" style="color: #bc9c22;">Title</label>
                    <input type="text" id="welcomeTitle" class="form-control"
                           value="Welcome to Community Portable Buildings of West Monroe, LA and Columbia, LA">
                </div>

                <div class="form-group">
                    <label for="welcomeMessage" style="color: #bc9c22;">Message</label>
                    <textarea id="welcomeMessage" class="form-control" rows="3">Take a look at what we have in stock, and let us know if we can design you a custom Graceland Building or help in any way!</textarea>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Hero Carousel Images</h2>
                <p class="help-text" style="color: #bc9c22;">Current images in the carousel. Drag to reorder, click X to remove.</p>

                <div id="carousel-images" class="carousel-manager">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="form-group">
                    <label for="newCarouselImage" style="color: #bc9c22;">Add New Image (filename from root directory)</label>
                    <div class="input-group">
                        <input type="text" id="newCarouselImage" class="form-control"
                               placeholder="e.g., Cabin-12x24-Angle.jpg">
                        <button class="btn btn-secondary" onclick="addCarouselImage()">Add Image</button>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-lg" onclick="saveCustomization()">💾 Save All Customization</button>
        </div>

        <!-- Inventory Settings Tab -->
        <div class="tab-content" id="inventory-tab">
            <style>
                .btn-radio {
                    display: block;
                    cursor: pointer;
                }
                .btn-radio-label {
                    display: block;
                    padding: 0.75rem 1rem;
                    background: rgba(255,255,255,0.05);
                    border: 2px solid #5a5a6a;
                    border-radius: 8px;
                    text-align: center;
                    font-weight: 600;
                    color: #bc9c22;
                    transition: all 0.2s;
                }
                .btn-radio input:checked + .btn-radio-label {
                    background: linear-gradient(135deg, #bc9c22 0%, #d4af37 100%);
                    border-color: #bc9c22;
                    color: #1a1a2e;
                    box-shadow: 0 4px 12px rgba(188, 156, 34, 0.3);
                }
                .btn-radio:hover .btn-radio-label {
                    border-color: #bc9c22;
                }
            </style>

            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Inventory Settings</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Configure your inventory sync with GPB Sales and customize how repo/pre-owned buildings display on your website. Set up automatic daily syncing and control the appearance and sorting of pre-owned inventory.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">GPB Sync Settings</h2>
                <p class="help-text" style="color: #bc9c22;">Configure your GPB Sales credentials to automatically sync your inventory. Your credentials are encrypted and stored securely.</p>

                <div class="form-group">
                    <label for="gpbUsername" style="color: #bc9c22;">GPB Sales Username/Email</label>
                    <input type="email" id="gpbUsername" class="form-control"
                           placeholder="Enter your GPB Sales email">
                    <p class="help-text" style="color: #bc9c22;">Your login email for GPB Sales portal</p>
                </div>

                <div class="form-group">
                    <label for="gpbPassword" style="color: #bc9c22;">GPB Sales Password</label>
                    <input type="password" id="gpbPassword" class="form-control"
                           placeholder="Enter your GPB Sales password">
                    <p class="help-text" style="color: #bc9c22;">Your password will be encrypted before storage</p>
                </div>

                <div class="setting-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoSyncEnabled">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text" style="color: #bc9c22;">Enable Automatic Daily Sync at 2 AM</span>
                    </label>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-primary" onclick="saveGpbCredentials()">
                        Save Credentials
                    </button>
                    <button class="btn btn-secondary" onclick="triggerUserSync()" id="user-sync-btn">
                        🔄 Sync Now
                    </button>
                </div>
                <p id="gpb-status" class="help-text" style="margin-top: 1rem; font-weight: 600; color: #bc9c22;"></p>

                <div style="background: rgba(33, 150, 243, 0.1); border-left: 4px solid #2196f3; padding: 1.25rem; margin-top: 1.5rem; border-radius: 6px;">
                    <p style="margin: 0; color: #2196f3; font-weight: 600; font-size: 1rem;">📱 Manage on the Go!</p>
                    <p style="margin: 0.75rem 0 0 0; color: #a8a8b8; line-height: 1.6;">
                        You can log in to your admin panel from your phone and access the <strong style="color: #fff;">Manage Buildings</strong> tab to upload photos directly to your listings from your mobile device. Perfect for adding photos while you're at the lot!
                    </p>
                </div>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Repo/Pre-Owned Display Options</h2>
                <p class="help-text" style="color: #bc9c22; margin-bottom: 1.5rem;">Customize how repo and pre-owned buildings appear on your website</p>

                <div class="form-group">
                    <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.75rem;">Building Sort Order</label>
                    <div class="button-group" style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
                        <label class="btn-radio" style="flex: 1;">
                            <input type="radio" name="repoSortOrder" id="repoSortOrder-last" value="last" checked style="display: none;">
                            <span class="btn-radio-label">Show Repos Last</span>
                        </label>
                        <label class="btn-radio" style="flex: 1;">
                            <input type="radio" name="repoSortOrder" id="repoSortOrder-first" value="first" style="display: none;">
                            <span class="btn-radio-label">Show Repos First</span>
                        </label>
                    </div>
                    <p class="help-text" style="color: #bc9c22;">Control whether repo buildings appear at the beginning or end of your inventory list</p>
                </div>

                <div class="form-group">
                    <label style="color: #bc9c22; font-weight: 600; display: block; margin-bottom: 0.75rem;">Price Display Style</label>
                    <div class="button-group" style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
                        <label class="btn-radio" style="flex: 1;">
                            <input type="radio" name="repoPriceDisplay" id="repoPriceDisplay-strikethrough" value="strikethrough" checked style="display: none;">
                            <span class="btn-radio-label">Strikethrough</span>
                        </label>
                        <label class="btn-radio" style="flex: 1;">
                            <input type="radio" name="repoPriceDisplay" id="repoPriceDisplay-discounted" value="discounted" style="display: none;">
                            <span class="btn-radio-label">Discounted Price</span>
                        </label>
                    </div>
                    <p class="help-text" style="color: #bc9c22;">
                        <strong>Strikethrough:</strong> Shows original price crossed out with "Call for Pre-Owned Price"<br>
                        <strong>Discounted:</strong> Auto-calculates discount: 2024 = 5% off, 2023 = 10% off, 2022 = 15% off, 2021+ = 20% off
                    </p>
                </div>

                <button class="btn btn-primary" onclick="saveInventorySettings()">Save Inventory Settings</button>
            </div>
        </div>

        <!-- Domain & Website Tab -->
        <div class="tab-content" id="domain-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Domain & Website Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Control your website's web address and view statistics. Choose a free shed-sync.com subdomain or connect your own custom domain. View metrics on your total buildings, available inventory, and uploaded photos.</p>
            </div>

            <!-- Dark Theme Domain Management with Yellow Accents -->
            <style>
                .domain-card {
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 12px;
                    padding: 2rem;
                    margin-bottom: 2rem;
                    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                    border: 1px solid #2a2a3e;
                }

                .domain-card h2 {
                    color: #ffd60a;
                    margin-bottom: 0.5rem;
                    font-size: 1.75rem;
                    font-weight: 700;
                }

                .domain-card p {
                    color: #a8a8b8;
                    margin-bottom: 1.5rem;
                }

                .domain-url-display {
                    background: #0f1419;
                    border: 2px solid #ffd60a;
                    border-radius: 8px;
                    padding: 1.25rem;
                    font-family: 'Courier New', monospace;
                    font-size: 1.125rem;
                    color: #ffd60a;
                    text-align: center;
                    font-weight: 600;
                    margin: 1.5rem 0;
                    box-shadow: 0 0 20px rgba(255, 214, 10, 0.15);
                }

                .domain-badge {
                    display: inline-block;
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-size: 0.875rem;
                    font-weight: 700;
                    margin-left: 1rem;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                }

                .domain-action-btn {
                    background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%);
                    color: #1a1a2e;
                    border: none;
                    padding: 0.875rem 2rem;
                    border-radius: 8px;
                    font-weight: 700;
                    font-size: 1rem;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 12px rgba(255, 214, 10, 0.3);
                    margin-right: 1rem;
                }

                .domain-action-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(255, 214, 10, 0.5);
                }

                .domain-action-btn:active {
                    transform: translateY(0);
                }

                .domain-section {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1.5rem;
                    border-left: 4px solid #ffd60a;
                }

                .domain-section h3 {
                    color: #fff;
                    margin-bottom: 1rem;
                    font-size: 1.25rem;
                }

                .domain-input {
                    background: #0f1419;
                    border: 2px solid #2a2a3e;
                    color: #fff;
                    padding: 0.875rem;
                    border-radius: 8px;
                    font-size: 1rem;
                    width: 100%;
                    transition: border-color 0.3s ease;
                }

                .domain-input:focus {
                    outline: none;
                    border-color: #ffd60a;
                    box-shadow: 0 0 0 3px rgba(255, 214, 10, 0.1);
                }

                .domain-input::placeholder {
                    color: #5a5a6a;
                }

                .dns-instructions {
                    background: #0f1419;
                    border: 1px solid #2a2a3e;
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-top: 1rem;
                }

                .dns-instructions h4 {
                    color: #ffd60a;
                    margin-bottom: 1rem;
                    font-size: 1.125rem;
                }

                .dns-record {
                    background: rgba(255, 214, 10, 0.05);
                    border-left: 3px solid #ffd60a;
                    padding: 1rem;
                    margin: 0.75rem 0;
                    border-radius: 4px;
                }

                .dns-record code {
                    color: #ffd60a;
                    font-family: 'Courier New', monospace;
                    background: #1a1a2e;
                    padding: 0.25rem 0.5rem;
                    border-radius: 4px;
                }

                .dns-record strong {
                    color: #fff;
                }

                .verification-status {
                    display: inline-flex;
                    align-items: center;
                    gap: 0.5rem;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    font-weight: 600;
                    font-size: 0.875rem;
                }

                .verification-status.pending {
                    background: rgba(255, 152, 0, 0.15);
                    color: #ff9800;
                    border: 1px solid #ff9800;
                }

                .verification-status.verified {
                    background: rgba(76, 175, 80, 0.15);
                    color: #4caf50;
                    border: 1px solid #4caf50;
                }

                .verification-status.failed {
                    background: rgba(244, 67, 54, 0.15);
                    color: #f44336;
                    border: 1px solid #f44336;
                }

                .help-note {
                    color: #a8a8b8;
                    font-size: 0.9rem;
                    margin-top: 0.75rem;
                    line-height: 1.6;
                }

                .copy-btn {
                    background: rgba(255, 214, 10, 0.1);
                    border: 1px solid #ffd60a;
                    color: #ffd60a;
                    padding: 0.375rem 0.75rem;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.875rem;
                    font-weight: 600;
                    transition: all 0.2s ease;
                    margin-left: 0.5rem;
                }

                .copy-btn:hover {
                    background: rgba(255, 214, 10, 0.2);
                }
            </style>

            <!-- Subdomain Picker (shown if user doesn't have subdomain) -->
            <div class="domain-card" id="subdomain-picker-card" style="display: none;">
                <h2>🌐 Choose Your Website Address</h2>
                <p>Pick a unique subdomain for your website. This will be your permanent web address.</p>

                <div class="domain-section">
                    <div class="form-group">
                        <label style="color: #ffd60a; font-weight: 600; display: block; margin-bottom: 0.75rem;">
                            Your Subdomain
                        </label>
                        <div style="display: flex; gap: 0.75rem; align-items: center;">
                            <input type="text"
                                   id="subdomain-input"
                                   class="domain-input"
                                   placeholder="yourbusiness"
                                   style="flex: 1; text-transform: lowercase;"
                                   oninput="checkSubdomainAvailability()">
                            <span style="color: #a8a8b8; font-weight: 600; white-space: nowrap;">.shed-sync.com</span>
                        </div>
                        <div id="subdomain-validation" style="margin-top: 0.75rem; font-weight: 600; display: none;">
                            <!-- Validation message will appear here -->
                        </div>
                        <p class="help-note">
                            💡 Use 3-30 characters: lowercase letters, numbers, and hyphens. Cannot start or end with a hyphen.<br>
                            <strong style="color: #ffd60a;">Example:</strong> mountain-sheds → mountain-sheds.shed-sync.com
                        </p>
                    </div>

                    <button class="domain-action-btn" onclick="saveSubdomain()" id="save-subdomain-btn" disabled style="opacity: 0.5; cursor: not-allowed;">
                        💾 Claim This Subdomain
                    </button>
                </div>
            </div>

            <!-- Your Subdomain (shown if user has subdomain) -->
            <div class="domain-card" id="subdomain-display-card" style="display: none;">
                <h2>🌐 Your Website Address</h2>
                <p>Your website is live at:</p>

                <div class="domain-url-display" id="subdomain-url">
                    Loading...
                </div>

                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="domain-action-btn" onclick="viewLiveSite()">
                        🚀 View Live Site
                    </button>
                    <button class="domain-action-btn" onclick="copySubdomainUrl()">
                        📋 Copy URL
                    </button>
                </div>
            </div>

            <!-- Custom Domain Section -->
            <div class="domain-card">
                <h2>🎯 Connect Your Own Domain</h2>
                <p>Want to use your own domain name? Connect it here (e.g., buytheshed.com)</p>

                <div class="domain-section">
                    <h3>Custom Domain</h3>

                    <!-- Domain Status Display (always visible when domain exists) -->
                    <div id="custom-domain-status" style="display: none; margin-bottom: 1.5rem;">
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 8px; padding: 1.25rem; border: 2px solid #ffd60a;">
                            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                                <div style="flex: 1;">
                                    <div style="color: #ffd60a; font-weight: 600; margin-bottom: 0.5rem;">Current Domain:</div>
                                    <div style="font-size: 1.25rem; color: #fff; font-weight: 600;" id="current-custom-domain-text"></div>
                                </div>
                                <div>
                                    <span class="verification-status" id="domain-verification-badge">
                                        ⏳ Pending Verification
                                    </span>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="domain-action-btn" onclick="checkDomainVerification()" id="check-verification-btn" style="background: #2196f3;">
                                    🔄 Check Status
                                </button>
                                <button class="domain-action-btn" onclick="removeCustomDomain()" style="background: #f44336;">
                                    🗑️ Remove Domain
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Input Form -->
                    <div id="custom-domain-form">
                        <div class="form-group">
                            <label style="color: #ffd60a; font-weight: 600; display: block; margin-bottom: 0.75rem;">
                                Enter Your Domain
                            </label>
                            <input type="text"
                                   id="custom-domain-input"
                                   class="domain-input"
                                   placeholder="Enter your domain (e.g., yourdomain.com)"
                                   style="margin-bottom: 1rem;">
                            <p class="help-note">
                                💡 Enter just the domain name without http:// or www. Example: <strong style="color: #ffd60a;">yourdomain.com</strong>
                            </p>
                        </div>

                        <button class="domain-action-btn" onclick="saveCustomDomain()">
                            💾 Save Custom Domain
                        </button>
                    </div>
                </div>

                <!-- DNS Instructions -->
                <div class="dns-instructions" id="dns-instructions" style="display: none;">
                    <h4>⚙️ DNS Configuration Required</h4>
                    <p style="color: #a8a8b8; margin-bottom: 1.5rem;">
                        Follow these steps to connect your custom domain. You'll need to add <strong>THREE</strong> DNS records:
                    </p>

                    <div style="background: rgba(255, 214, 10, 0.08); border-left: 3px solid #ffd60a; padding: 1.25rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #ffd60a; display: block; margin-bottom: 1rem;">📋 Step-by-Step Guide:</strong>

                        <ol style="color: #a8a8b8; margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong style="color: #fff;">Log in to your domain registrar</strong> (GoDaddy, Namecheap, etc.) and go to DNS settings</li>
                            <li><strong style="color: #fff;">Find your domain</strong> (e.g., yourdomain.com) and click "DNS" or "Manage DNS"</li>
                            <li><strong style="color: #fff;">Add the following three records:</strong></li>
                        </ol>
                    </div>

                    <div style="background: rgba(33, 150, 243, 0.1); border-left: 3px solid #2196f3; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #2196f3; display: block; margin-bottom: 0.75rem;">Records 1 & 2: A Records (for root domain)</strong>
                        <p style="color: #a8a8b8; margin: 0 0 1rem 0; font-size: 0.9rem;">Add BOTH of these A records to make yourdomain.com work</p>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0;">
                        <strong>Type:</strong> <code>A</code><br>
                        <strong>Name:</strong> <code>@</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;">(this means root domain)</span><br>
                        <strong>Value/Points to:</strong> <code>76.76.21.93</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('76.76.21.93').then(() => alert('✓ Copied to clipboard!'))">📋 Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0; background: rgba(255, 214, 10, 0.05); padding: 1rem; border-radius: 4px;">
                        <strong>Type:</strong> <code>A</code><br>
                        <strong>Name:</strong> <code>@</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;">(same as above - add a second A record)</span><br>
                        <strong>Value/Points to:</strong> <code>76.76.21.123</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('76.76.21.123').then(() => alert('✓ Copied to clipboard!'))">📋 Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div style="background: rgba(33, 150, 243, 0.1); border-left: 3px solid #2196f3; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #2196f3; display: block; margin-bottom: 0.75rem;">Record 3: CNAME Record (for www subdomain)</strong>
                        <p style="color: #a8a8b8; margin: 0 0 1rem 0; font-size: 0.9rem;">This makes www.yourdomain.com work</p>
                    </div>

                    <div class="dns-record" style="margin: 1.5rem 0;">
                        <strong>Type:</strong> <code>CNAME</code><br>
                        <strong>Name:</strong> <code>www</code><br>
                        <strong>Value/Points to:</strong> <code>cname.vercel-dns.com</code>
                        <button class="copy-btn" onclick="navigator.clipboard.writeText('cname.vercel-dns.com').then(() => alert('✓ Copied to clipboard!'))">📋 Copy</button><br>
                        <strong style="margin-top: 0.5rem; display: inline-block;">TTL:</strong> <code>1 Hour</code> <span style="color: #a8a8b8; font-size: 0.85rem; font-weight: normal;"> (or leave as default)</span>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); border-left: 3px solid #4caf50; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #4caf50; display: block; margin-bottom: 0.75rem;">✓ After Adding Both Records:</strong>
                        <p style="color: #a8a8b8; margin: 0; font-size: 0.9rem; line-height: 1.6;">
                            Both <code>yourdomain.com</code> AND <code>www.yourdomain.com</code> will work!<br><br>
                            The A record makes your root domain work, and the CNAME makes the www subdomain work. This is the standard setup used by professional websites.
                        </p>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.05); border-left: 3px solid #a8a8b8; padding: 1rem; margin: 1rem 0; border-radius: 4px;">
                        <strong style="color: #a8a8b8; font-size: 0.9rem;">⚠️ Common Issues:</strong>
                        <ul style="color: #a8a8b8; margin: 0.5rem 0 0 1.5rem; font-size: 0.85rem; line-height: 1.6;">
                            <li>If you see an existing "A" record for "www", <strong>delete it</strong> before adding the CNAME record</li>
                            <li>Make sure the A record uses <strong>"@"</strong> (or leave Name blank for root domain)</li>
                            <li>Make sure the CNAME record uses <strong>"www"</strong> not "@"</li>
                            <li>Don't include "http://" or "https://" in any Value field</li>
                            <li>Some registrars automatically add the domain to the end - use their help docs if confused</li>
                        </ul>
                    </div>

                    <p class="help-note" style="margin-top: 1rem; font-size: 0.9rem;">
                        ⏱️ <strong>Timing:</strong> DNS changes typically take 5-60 minutes to propagate (sometimes up to 24 hours). We'll automatically verify your domain once the DNS is configured correctly.
                    </p>

                    <p class="help-note" style="background: rgba(33, 150, 243, 0.1); padding: 0.75rem; border-radius: 4px; border-left: 3px solid #2196f3;">
                        💡 <strong>Why both records?</strong> The A record points your root domain (yourdomain.com) to our server, and the CNAME points the www subdomain to our Vercel hosting. Both records together ensure your site works with or without www.
                    </p>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="domain-card">
                <h2>📊 Website Statistics</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                    <div style="background: rgba(255, 214, 10, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffd60a;">
                        <div style="font-size: 2rem; color: #ffd60a; font-weight: 700;" id="building-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Buildings Listed</div>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #4caf50;">
                        <div style="font-size: 2rem; color: #4caf50; font-weight: 700;" id="available-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Available</div>
                    </div>
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <div style="font-size: 2rem; color: #2196f3; font-weight: 700;" id="photo-count">0</div>
                        <div style="color: #a8a8b8; font-size: 0.9rem;">Photos Uploaded</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leads Tab -->
        <div class="tab-content" id="leads-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Lead Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Track customer inquiries and manage your sales pipeline. Add new leads, update status, add notes, and never miss a follow-up.</p>
            </div>

            <!-- Quick Add Lead Form -->
            <div class="card" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 2px solid #ffd60a;">
                <h2 style="color: #ffd60a;">➕ Add New Lead</h2>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="form-group">
                        <label style="color: #fff;">Customer Name *</label>
                        <input type="text" id="new-lead-name" class="form-control" placeholder="John Smith" required>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Phone</label>
                        <input type="tel" id="new-lead-phone" class="form-control" placeholder="318-555-1234">
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Email</label>
                        <input type="email" id="new-lead-email" class="form-control" placeholder="john@example.com">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div class="form-group">
                        <label style="color: #fff;">Source</label>
                        <select id="new-lead-source" class="form-control">
                            <option value="website">Website</option>
                            <option value="facebook">Facebook</option>
                            <option value="phone">Phone Call</option>
                            <option value="walk-in">Walk-in</option>
                            <option value="referral">Referral</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Priority</label>
                        <select id="new-lead-priority" class="form-control">
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="color: #fff;">Interested Building (optional)</label>
                        <input type="text" id="new-lead-building" class="form-control" placeholder="Serial #">
                    </div>
                </div>

                <div class="form-group" style="margin-top: 1rem;">
                    <label style="color: #fff;">Notes</label>
                    <textarea id="new-lead-notes" class="form-control" rows="2" placeholder="Customer notes..."></textarea>
                </div>

                <button class="btn btn-primary btn-lg" onclick="addNewLead()" style="background: linear-gradient(135deg, #ffd60a 0%, #ffea00 100%); color: #1a1a2e; margin-top: 1rem;">
                    ➕ Add Lead
                </button>
            </div>

            <!-- Lead Pipeline -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="margin: 0;">📊 Sales Pipeline</h2>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div style="display: flex; gap: 0.75rem;">
                            <span style="background: #2196f3; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">🆕 <span id="new-count">0</span></span>
                            <span style="background: #ff9800; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">📞 <span id="contacted-count">0</span></span>
                            <span style="background: #9c27b0; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">💰 <span id="quoted-count">0</span></span>
                            <span style="background: #4caf50; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">✅ <span id="sold-count">0</span></span>
                            <span style="background: #f44336; color: white; padding: 0.375rem 0.75rem; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">❌ <span id="lost-count">0</span></span>
                        </div>
                        <button class="btn btn-secondary" onclick="loadLeads()">🔄 Refresh</button>
                    </div>
                </div>

                <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f8f9fa; border-bottom: 2px solid #e0e0e0;">
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Status</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Name</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Contact</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Building</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Date</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-weight: 600; color: #666; font-size: 0.875rem;">Source</th>
                            </tr>
                        </thead>
                        <tbody id="leads-table-body">
                            <!-- Lead rows will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <div id="empty-leads-message" style="display: none; padding: 3rem; text-align: center; color: #999;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">📋</div>
                    <p style="margin: 0;">No leads yet. Add your first lead above!</p>
                </div>
            </div>
        </div>

        <!-- Lead Detail Modal -->
        <div class="modal" id="lead-modal" style="display: none;">
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <h2 id="lead-modal-title">Lead Details</h2>
                    <button class="modal-close" onclick="closeLeadModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="lead-modal-content">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Settings Tab -->
        <div class="tab-content" id="payments-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Subscription & Billing</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your Shed-Sync subscription and billing information. Update your payment method or view billing history.</p>
            </div>

            <div class="card">
                <h2>💳 Current Subscription</h2>

                <div id="subscription-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Plan</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-plan">Monthly Subscription</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Amount</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-amount">$99/month</div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Status</div>
                            <div style="font-size: 1.25rem; font-weight: 600;" id="subscription-status">
                                <span style="color: #4caf50;">● Active</span>
                            </div>
                        </div>
                        <div>
                            <div style="color: #666; font-size: 0.875rem; margin-bottom: 0.25rem;">Next Billing Date</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: #1a5490;" id="subscription-next-billing">—</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Payment Method</h3>

                <div id="payment-method-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="font-size: 2rem;">💳</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;" id="card-info">No payment method on file</div>
                            <div style="color: #666; font-size: 0.875rem;" id="card-expires">—</div>
                        </div>
                        <button class="btn btn-secondary" onclick="updatePaymentMethod()">
                            Update Payment Method
                        </button>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Billing History</h3>

                <div id="billing-history" style="margin-bottom: 1.5rem;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e0e0e0; text-align: left;">
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Date</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Description</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Amount</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Status</th>
                                <th style="padding: 0.75rem; color: #666; font-weight: 600;">Receipt</th>
                            </tr>
                        </thead>
                        <tbody id="billing-history-body">
                            <tr>
                                <td colspan="5" style="padding: 2rem; text-align: center; color: #999;">
                                    Loading billing history...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 4px; margin-top: 2rem;">
                    <p style="margin: 0; font-weight: 600; color: #856404;">Need help with billing?</p>
                    <p style="margin: 0.5rem 0 0 0; color: #856404; font-size: 0.9rem;">
                        Contact our support team at <a href="mailto:billing@shed-sync.com" style="color: #856404; text-decoration: underline;">billing@shed-sync.com</a> for assistance with billing questions or to cancel your subscription.
                    </p>
                </div>
            </div>
        </div>

        <!-- Account Settings Tab -->
        <div class="tab-content" id="settings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Account Settings</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Manage your account security and customize what information appears on your website. Change your Shed-Sync login password and toggle visibility of cash prices and rent-to-own options on your public site.</p>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Display Settings</h2>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div class="setting-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="showCashPrice" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Show Cash Prices</span>
                        </label>
                    </div>

                    <div class="setting-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="showRtoOptions" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" style="color: #bc9c22;">Show Rent-to-Own Options</span>
                        </label>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>

            <div class="card" style="background: #1a1a2e; color: #bc9c22;">
                <h2 style="color: #bc9c22;">Change Password</h2>
                <p class="help-text" style="color: #bc9c22;">Update your Shed-Sync login password</p>

                <div class="form-group">
                    <label for="currentPassword" style="color: #bc9c22;">Current Password</label>
                    <input type="password" id="currentPassword" class="form-control" placeholder="Enter your current password">
                </div>

                <div class="form-group">
                    <label for="newPassword" style="color: #bc9c22;">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password (min 8 characters)">
                    <p class="help-text" style="color: #bc9c22;">Must be at least 8 characters long</p>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" style="color: #bc9c22;">Confirm New Password</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm new password">
                </div>

                <button class="btn btn-primary" onclick="changePassword()">Change Password</button>
                <p id="password-change-status" class="help-text" style="margin-top: 1rem; font-weight: 600; color: #bc9c22;"></p>
            </div>
        </div>

        <!-- Other Lots Tab -->
        <div class="tab-content" id="lots-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Multi-Location Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">Track inventory from multiple lot locations in one place. Add additional GPB Sales credentials for other locations, and buildings will automatically sync daily and display with their lot location tags on your website.</p>
            </div>

            <div class="card">
                <h2>Manage Other Lot Locations</h2>
                <p class="help-text">Track inventory from other lot locations. Buildings will be tagged with their lot location.</p>

                <div id="lots-list" class="lots-list">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Sync Inventory</h3>
                    <p class="help-text">✅ Automatic sync runs daily at 2 AM. Or trigger a manual sync now:</p>
                    <button class="btn btn-primary" onclick="triggerManualSync()" id="manual-sync-btn">
                        🔄 Run Manual Sync Now
                    </button>
                    <p id="sync-status" class="help-text" style="margin-top: 1rem; color: var(--text-light);"></p>
                </div>

                <div class="card" style="background: var(--background); margin-top: 1.5rem;">
                    <h3>Add New Lot Location</h3>

                    <!-- Multi-lot feature disabled message -->
                    <div id="multi-lot-disabled" style="display: none;">
                        <p class="help-text" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                            📍 Want to manage multiple lot locations? Contact DealerSync to find out how to add support for your other locations:<br>
                            <strong style="color: #2196f3; margin-top: 0.5rem; display: inline-block;">support@dealersync.com</strong>
                        </p>
                    </div>

                    <!-- Multi-lot feature enabled form -->
                    <div id="multi-lot-enabled" style="display: none;">
                        <p class="help-text">Enter GPB Sales credentials for another lot location. Buildings will be automatically synced daily and tagged with the lot name.</p>
                        <div class="form-group">
                            <label for="lot-name">Lot Name/Location</label>
                            <input type="text" id="lot-name" class="form-control" placeholder="e.g., Columbia, LA">
                        </div>
                        <div class="form-group">
                            <label for="lot-username">GPB Sales Username/Email</label>
                            <input type="email" id="lot-username" class="form-control" placeholder="Enter GPB Sales email">
                        </div>
                        <div class="form-group">
                            <label for="lot-password">GPB Sales Password</label>
                            <input type="password" id="lot-password" class="form-control" placeholder="Enter GPB Sales password">
                        </div>
                        <button class="btn btn-primary" onclick="addLot()">Add Lot Location</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Buildings Tab -->
        <div class="tab-content" id="buildings-tab">
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1.25rem; border-radius: 8px; margin-bottom: 2rem;">
                <h3 style="margin: 0 0 0.5rem 0; color: #1976d2; font-size: 1.1rem;">Building Inventory Management</h3>
                <p style="margin: 0; color: #1565c0; line-height: 1.6;">View and manage all your building inventory in one place. Upload photos, set custom pricing, mark buildings as sold or pending, decode serial numbers for details, and control which buildings appear on your public website.</p>
            </div>

            <div class="card">
                <h2>Manage Buildings</h2>

                <div class="admin-filters">
                    <div class="admin-filter-group">
                        <input type="text" id="building-search" class="form-control" placeholder="Search by serial number, size, or type...">
                    </div>
                    <div class="admin-filter-group">
                        <select id="building-status-filter" class="form-control">
                            <option value="all">All Buildings</option>
                            <option value="available">Available</option>
                            <option value="pending">Pending</option>
                            <option value="sold">Sold</option>
                            <option value="hidden">Hidden</option>
                        </select>
                        <select id="building-type-filter" class="form-control">
                            <option value="all">All Types</option>
                            <option value="new">New Inventory</option>
                            <option value="repo">Pre-Owned (Repo)</option>
                        </select>
                    </div>
                </div>

                <div class="buildings-list" id="buildings-list">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <div class="toast" id="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal" id="image-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Building Images</h2>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-building-info"></div>

                <div class="image-gallery" id="building-images">
                    <!-- Uploaded images will appear here -->
                </div>

                <div class="upload-section">
                    <label class="upload-btn">
                        <input type="file" id="image-upload" accept="image/*,.heic" multiple style="display: none;">
                        <span>📷 Upload Photos (Max 5)</span>
                    </label>
                    <p class="help-text">Supports JPG, PNG, HEIC. HEIC will be auto-converted. Drag images to reorder. Click ★ to set main image.</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeImageModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="decoder.js?v=4"></script>
    <script src="inventory.js?v=4"></script>
    <script src="leads.js?v=1"></script>
    <script src="admin.js?v=4"></script>
</body>
</html>
